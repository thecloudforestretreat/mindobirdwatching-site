<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Tours: Medio d√≠a | Mindo Bird Watching</title>
  <meta name="description" content="Explora tours de avistamiento de medio d√≠a en el bosque nublado de Mindo, Ecuador. Gu√≠as locales expertos, grupos peque√±os y rutas matutinas con grandes oportunidades de observaci√≥n." />

  <meta name="robots" content="index,follow">

  <link rel="canonical" href="https://mindobirdwatching.com/es/tours/medio-d√≠a/" />

  <link rel="alternate" hreflang="en" href="https://mindobirdwatching.com/tours-half-day/" />
  <link rel="alternate" hreflang="es" href="https://mindobirdwatching.com/es/tours/medio-d√≠a/" />
  <link rel="alternate" hreflang="x-default" href="https://mindobirdwatching.com/tours-half-day/" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Mindo Bird Watching" />
  <meta property="og:title" content="Tours de medio d√≠a en Mindo | Mindo Bird Watching" />
  <meta property="og:description" content="Explora tours de avistamiento de medio d√≠a en el bosque nublado de Mindo, Ecuador. Gu√≠as locales expertos, grupos peque√±os y rutas matutinas con grandes oportunidades de observaci√≥n." />
  <meta property="og:url" content="https://mindobirdwatching.com/es/tours/medio-d√≠a/" />
  <meta property="og:image" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.jpg" />
  <meta property="og:image:secure_url" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Mindo Bird Watching - Cloud forest birding tours in Mindo, Ecuador" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Tours de medio d√≠a en Mindo | Mindo Bird Watching" />
  <meta name="twitter:description" content="Explora tours de avistamiento de medio d√≠a en el bosque nublado de Mindo, Ecuador. Gu√≠as locales expertos, grupos peque√±os y rutas matutinas con grandes oportunidades de observaci√≥n." />
  <meta name="twitter:image" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.jpg" />

  <!-- Favicons (approved root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#034EA2">

  <!-- Global / shared CSS -->
  <link rel="stylesheet" href="/assets/css/site.css" />
  <!-- Header dropdown styling -->
  <link rel="stylesheet" href="/assets/css/header.css?v=1">

  <!-- Head-only JS -->
  <script src="/assets/js/head.js" defer></script>

  <style>
    /* Page-only styles (no header/footer/menu styles) */
    .page{ margin-top: 18px; padding: 26px; }
    .page.card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
    }

    .hero{
      display: grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 16px;
      align-items: start;
    }

    .copy{ max-width: 92ch; }
    .copy p{ margin: 0 0 12px; line-height: 1.6; }

    .checks{
      margin: 12px 0 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 8px;
    }
    .checks li{
      display: flex;
      gap: 10px;
      align-items: flex-start;
      color: var(--ink);
    }
    .checks .tick{
      width: 22px;
      height: 22px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.65);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex: 0 0 auto;
      font-weight: 900;
      color: var(--forest);
      line-height: 1;
    }

    .btnRow{
      margin-top: 14px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    /* Two 9:16 slots (kept from Half Day page) */
    .slots{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    .slot.card{
      background: rgba(255,255,255,.65);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .slotFrame{
      aspect-ratio: 9 / 16;
      background: rgba(255,255,255,.55);
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .slotFrame img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .section{
      margin-top: 18px;
      padding-top: 14px;
      border-top: 1px solid var(--line);
    }
    .section h2{
      margin: 0 0 10px;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
      font-size: 20px;
    }
    .hint{ margin: 0 0 12px; color: var(--muted); font-size: 13px; }

    /* Standard MBW carousel (same as Full Day page) */
    .mbwCarousel{
      position: relative;
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .mbwCarouselViewport{ width: 100%; overflow: hidden; }
    .mbwCarouselTrack{
      display: flex;
      width: 100%;
      transform: translateX(0);
      transition: transform 420ms ease;
      will-change: transform;
    }
    .mbwSlide{ flex: 0 0 100%; width: 100%; }

    .mbwSlide img{
      width: 100%;
      display: block;
      object-fit: cover;
    }
    .mbwSlide .label{
      padding: 10px 12px;
      border-top: 1px solid var(--line);
      color: var(--muted);
      font-size: 13px;
      background: rgba(255,255,255,.55);
    }

    .mbwNavBtn{
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 44px;
      height: 44px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      z-index: 2;
    }
    .mbwNavBtn:focus{ outline: 2px solid rgba(13,89,37,.35); outline-offset: 2px; }
    .mbwNavBtn svg{ width: 20px; height: 20px; }
    .mbwNavPrev{ left: 10px; }
    .mbwNavNext{ right: 10px; }

    .mbwDots{
      position: absolute;
      left: 50%;
      bottom: 10px;
      transform: translateX(-50%);
      display: inline-flex;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.78);
      z-index: 2;
      pointer-events: none;
    }
    .mbwDot{
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: rgba(13,89,37,.22);
    }
    .mbwDot.is-active{ background: rgba(13,89,37,.65); }

    /* 9:16 strict height (keeps carousel + video same height) */
    .frame916{
      aspect-ratio: 9 / 16;
      width: 100%;
      background: rgba(255,255,255,.55);
    }
    .frame916 iframe{
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }

    /* Tall carousel - force FULL height and remove the empty label strip */
    .mbwCarousel.isTall{
      height: 100%;
    }
    .mbwCarousel.isTall .mbwCarouselViewport{
      aspect-ratio: 9 / 16;
      height: 100%;
      background: rgba(255,255,255,.55);
    }
    .mbwCarousel.isTall .mbwCarouselTrack,
    .mbwCarousel.isTall .mbwSlide{
      height: 100%;
    }
    .mbwCarousel.isTall .mbwSlide img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .mbwCarousel.isTall .mbwSlide .label{
      display: none;
    }

    /* Med√≠a grid (left gallery + right video) */
    .videoGrid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      align-items: start;
    }

    .med√≠aCard{
      background: rgba(255,255,255,.65);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .frame916{
      overflow: hidden;
      border-radius: var(--r);
    }
    .med√≠aCard .head{
      padding: 12px 14px;
      border-bottom: 1px solid var(--line);
      background: rgba(255,255,255,.55);
    }
    .med√≠aCard .head h3{
      margin: 0;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
      font-size: 18px;
    }
    .med√≠aCard .cap{
      padding: 10px 12px;
      border-top: 1px solid var(--line);
      font-size: 13px;
      color: var(--muted);
      background: rgba(255,255,255,.55);
    }

    @med√≠a (max-width: 900px){
      .hero{ grid-template-columns: 1fr; }
      .slots{ grid-template-columns: 1fr; }
      .videoGrid{ grid-template-columns: 1fr; }
    }

    @med√≠a (prefers-reduced-motion: reduce){
      .mbwCarouselTrack{ transition: none; }
    }
  
/* Featured tours + guides */
.featured { padding: 28px 0 6px; }
.featured .wrap { max-width: 1120px; margin: 0 auto; padding: 0 18px; }
.sectionHead { display:flex; align-items:flex-end; justify-content:space-between; gap:14px; margin: 0 0 14px; }
.sectionHead .subhead { margin: 0; color: rgba(0,0,0,0.72); max-width: 62ch; }
.featureGrid { display:grid; grid-template-columns: repeat(12, 1fr); gap: 14px; }
.fCard { background:#fff; border:1px solid rgba(0,0,0,0.10); border-radius: 16px; overflow:hidden; display:flex; flex-direction:column; box-shadow: 0 14px 28px rgba(0,0,0,0.06); }
.fCard .fImg { display:block; position:relative; height: 230px; overflow:hidden; }
.fCard .fImg img { width:100%; height:100%; object-fit:cover; display:block; }
.fBody { padding: 14px 14px 16px; display:flex; flex-direction:column; gap: 8px; flex: 1 1 auto; }
.fBody h3 { margin:0; font-size: 16px; line-height: 1.25; }
.fBody p { margin:0; color: rgba(0,0,0,0.72); font-size: 13.5px; line-height: 1.35; }
.fBody .btn { margin-top: 10px; width: fit-content; }
.fTour { grid-column: span 6; }
.fGuide { grid-column: span 3; }

.fTour .fImg { height: 250px; }
.fGuide .fImg { height: 170px; }
@med√≠a (max-width: 980px) {
  .sectionHead { flex-direction: column; align-items: flex-start; }
  .fTour { grid-column: span 12; }
  .fGuide { grid-column: span 6; }
}
@med√≠a (max-width: 640px) {
  .featured { padding-top: 18px; }
  .featureGrid { grid-template-columns: 1fr; }
  .fTour, .fGuide { grid-column: auto; }
  .fCard { min-height: unset; }
  .fCard .fImg { height: 170px; }
}

</style>
</head>

<body>
  <div class="container">

    <!-- Global header mount -->
    <div id="siteHeader"></div>

    <main class="page card">
      <section class="hero" aria-label="Half day tours header">
        <div class="copy">
          <h1 style="margin:0 0 6px;">Tours: Medio d√≠a</h1>

          <p>
            Avistamiento de medio d√≠a, grandes encuentros. √önete a una ruta guiada por la ma√±ana en el bosque nublado de Mindo, programada para la mejor luz y el mayor movimiento.
          </p>

          <p>
            Elige una experiencia al amanecer mas enfocada o una caminata tranquila por el bosque. Grupos peque√±os, experiencia local y log√≠stica fluida de principio a fin.
          </p>

          <ul class="checks" aria-label="Half day tour benefits">
            <li><span class="tick" aria-hidden="true">‚úì</span> Guiado por expertos locales con experiencia</li>
            <li><span class="tick" aria-hidden="true">‚úì</span> Equipo de alta calidad incluido</li>
            <li><span class="tick" aria-hidden="true">‚úì</span> Transporte c√≥modo incluido</li>
          </ul>

          <p style="margin-top:12px;">
            Estos son solo algunos de los tours que ofrecemos. Reserva hoy y deja que armemos tu experiencia ideal de observaci√≥n de aves en üìçMindo, Ecuador.
          </p>

          <p style="margin-top:12px; font-weight:900;">
            Reserva tu tour ahora y empieza tu aventura.
          </p>

          <div class="btnRow" aria-label="Half day tour actions">
            <a class="btn primary" href="/es/reservar-tour/">Reservar Ahora</a>
            <a class="btn secondary" href="/es/preguntas-frecuentes-faq/">Preguntas</a>
            <a class="btn secondary" href="https://wa.me/13054585402" target="_blank" rel="noopener">WhatsApp</a>    
            <a class="btn secondary" href="/es/tours/">Volver</a>
          </div>
        </div>

        <!-- Keep the two images at the top (unchanged) -->
        <aside class="slots" aria-label="Two 9 by 16 half day tour options">
          <div class="slot card" aria-label="Half day option 1 image slot">
            <div class="slotFrame">
              <img
                src="/assets/images/tour-promos/MBW_Tour_Options-6-MBW005_HDT_Image_En.jpg"
                alt="Half day tour option 1"
              />
            </div>
          </div>

          <div class="slot card" aria-label="Half day option 2 image slot">
            <div class="slotFrame">
              <img
                src="/assets/images/tour-promos/MBW_Tour_Options-10-MBW004_HDT_Image_En.jpg"
                alt="Half day tour option 2"
              />
            </div>
          </div>
        </aside>
      </section>


      <section class="featured" aria-label="Featured half day tours and birding guides">
        <div class="wrap">
          <div class="sectionHead">
            <h2 style="margin:0;">Tours destacados y gu√≠as de aves</h2>
            <p class="subhead">Dos opciones de medio d√≠a, mas gu√≠as r√°pidas de las aves clave que puedes esperar.</p>
          </div>

          <div class="featureGrid">
            <article class="fCard fTour" aria-label="Gallo de la pena andino al amanecer tour">
              <a class="fImg" href="/es/tours/gallo-de-la-pena-andino-al-amanecer/" aria-label="View Gallo de la pena andino al amanecer tour">
                <img src="/assets/images/pages/tours/andean_cock_of_the_rock_dawn/mbw_tours_acotr_dawn_01.jpg" alt="Andean Cock-of-the-Rock at dawn in Mindo, Ecuador">
              </a>
              <div class="fBody">
                <h3>Gallo de la pena andino al amanecer</h3>
                <p>Observacion del lek al amanecer, luego una breve caminata por el bosque.</p>
                <a class="btn primary" href="/es/tours/gallo-de-la-pena-andino-al-amanecer/">Ver tour completo</a>
              </div>
            </article>

            <article class="fCard fTour" aria-label="Jewels of the Morning Forest tour">
              <a class="fImg" href="/es/tours/joyas-del-bosque-matutino/" aria-label="View Jewels of the Morning Forest tour">
                <img src="/assets/images/pages/tours/jewels-morning-forest-birding/mbw_tours_jewels_hero_02.jpg" alt="Morning forest birding in Mindo, Ecuador">
              </a>
              <div class="fBody">
                <h3>Joyas del bosque matutino</h3>
                <p>Bandadas mixtas, colibr√≠es y senderos ideales para fotos.</p>
                <a class="btn primary" href="/es/tours/joyas-del-bosque-matutino/">Ver tour completo</a>
              </div>
            </article>

            <article class="fCard fGuide" aria-label="Gu√≠a del gallo de la pena andino">
              <a class="fImg" href="/es/birding/gallo-de-la-pena-andino/" aria-label="Open Gu√≠a del gallo de la pena andino">
                <img src="/assets/images/pages/birding/mbw_birding_acotr_hero_01.jpg" alt="Gu√≠a del gallo de la pena andino">
              </a>
              <div class="fBody">
                <h3>Gu√≠a del gallo de la pena andino</h3>
                <p>Como funciona el lek, cuando ir y que escuchar.</p>
                <a class="btn ghost" href="/es/birding/gallo-de-la-pena-andino/">Abrir gu√≠a</a>
              </div>
            </article>

            <article class="fCard fGuide" aria-label="Gu√≠a de tucanes de Mindo">
              <a class="fImg" href="/es/birding/tucanes-de-mindo/" aria-label="Open Gu√≠a de tucanes de Mindo">
                <img src="/assets/images/pages/birding/mbw_birding_toucans_hero_02.jpg" alt="Gu√≠a de tucanes de Mindo">
              </a>
              <div class="fBody">
                <h3>Gu√≠a de tucanes de Mindo</h3>
                <p>Lo que puedes ver en rutas matutinas y donde se alimentan los tucanes.</p>
                <a class="btn ghost" href="/es/birding/tucanes-de-mindo/">Abrir gu√≠a</a>
              </div>
            </article>

            <article class="fCard fGuide" aria-label="Gu√≠a de t√°ngaras de Mindo">
              <a class="fImg" href="/es/birding/t√°ngaras-de-mindo/" aria-label="Open Gu√≠a de t√°ngaras de Mindo">
                <img src="/assets/images/pages/birding/mbw_birding_tanagers_hero_02.jpg" alt="Gu√≠a de t√°ngaras de Mindo">
              </a>
              <div class="fBody">
                <h3>Gu√≠a de t√°ngaras de Mindo</h3>
                <p>Ayuda para bandadas mixtas y los colores que debes buscar en el dosel.</p>
                <a class="btn ghost" href="/es/birding/t√°ngaras-de-mindo/">Abrir gu√≠a</a>
              </div>
            </article>

            <article class="fCard fGuide" aria-label="Gu√≠a de colibr√≠es de Mindo">
              <a class="fImg" href="/es/birding/colibr√≠es-de-mindo/" aria-label="Open Gu√≠a de colibr√≠es de Mindo">
                <img src="/assets/images/pages/birding/mbw_birding_hummingbirds_hero_01.jpg" alt="Gu√≠a de colibr√≠es de Mindo">
              </a>
              <div class="fBody">
                <h3>Gu√≠a de colibr√≠es de Mindo</h3>
                <p>Comederos, flores y consejos rapidos de identificaci√≥n para aleteos veloces.</p>
                <a class="btn ghost" href="/es/birding/colibr√≠es-de-mindo/">Abrir gu√≠a</a>
              </div>
            </article>
          </div>
        </div>
      </section>


      <!-- Full Day layout section (gallery + video side-by-side, both 9:16) -->
      <section class="section" aria-label="Gallery and video section">
        <p class="hint"></p>

        <div class="videoGrid" aria-label="Med√≠a grid">
          <!-- Left: 9:16 image carousel -->
          <article class="med√≠aCard" aria-label="Galer√≠a de tours de medio d√≠a">
            <div class="head">
              <h3>Galer√≠a de tours de medio d√≠a</h3>
            </div>

            <div class="frame916">
              <div class="mbwCarousel isTall" data-autoplay="true" data-interval="2400" aria-label="Half day vertical carousel">
                <button class="mbwNavBtn mbwNavPrev" type="button" aria-label="Previous image">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M15 18l-6-6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>

                <div class="mbwCarouselViewport" role="region" aria-label="Carousel viewport">
                  <div class="mbwCarouselTrack">
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-61-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 61" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-62-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 62" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-63-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 63" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-64-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 64" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-65-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 65" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-66-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 66" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-67-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 67" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-68-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 68" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-69-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 69" />
                      <div class="label"></div>
                    </div>
                    <div class="mbwSlide">
                      <img src="/assets/images/pages/tours/half-day/MBW-Assets-70-Tours-HD-Carousel.jpg" alt="Half day tour vertical photo 70" />
                      <div class="label"></div>
                    </div>
                  </div>
                </div>

                <button class="mbwNavBtn mbwNavNext" type="button" aria-label="Next image">
                  <svg viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M9 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>

                <div class="mbwDots" aria-label="Carousel position indicators"></div>
              </div>
            </div>

            <div class="cap">Momentos de tours de medio d√≠a</div>
          </article>

          <!-- Right: YouTube short -->
          <article class="med√≠aCard" aria-label="Videos">
            <div class="head">
              <h3>Videos</h3>
            </div>

            <div class="frame916">
              <iframe width="487" height="866"
                src="https://www.youtube.com/embed/C3eomfxr8SM"
                title="Asombro en en vivo: aves del bosque nublado de Mindo, Ecuador"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-med√≠a; gyroscope; picture-in-picture; web-share"
                referrerpolicy="strict-origin-when-cross-origin"
                allowfullscreen></iframe>
            </div>

            <div class="cap">Asombro en en vivo: aves del bosque nublado de Mindo, Ecuador</div>
          </article>
        </div>
      </section>
    </main>

    <!-- Global footer mount -->
    <div id="siteFooter"></div>

  </div>

  <!-- Shared includes + header behavior -->
  <script src="/assets/js/includes.js?v=1" defer></script>
  <script src="/assets/js/site.js?v=1" defer></script>

  <script>
    (function(){
      function clamp(i, n){
        return (i % n + n) % n;
      }

      function initCarousel(root){
        if(!root || root.dataset.carouselInit === "1") return;
        root.dataset.carouselInit = "1";

        const track = root.querySelector(".mbwCarouselTrack");
        const slides = Array.from(root.querySelectorAll(".mbwSlide"));
        const prevBtn = root.querySelector(".mbwNavPrev");
        const nextBtn = root.querySelector(".mbwNavNext");
        const dotsWrap = root.querySelector(".mbwDots");

        if(!track || slides.length === 0) return;

        let index = 0;
        const intervalMs = Number(root.getAttribute("data-interval") || "2500");
        const autoplay = (root.getAttribute("data-autoplay") || "true") === "true";
        const reduceMotion = window.matchMed√≠a && window.matchMed√≠a("(prefers-reduced-motion: reduce)").matches;

        function renderDots(){
          if(!dotsWrap) return;
          dotsWrap.innerHTML = "";
          slides.forEach((_, i) => {
            const d = document.createElement("span");
            d.className = "mbwDot" + (i === index ? " is-active" : "");
            d.setAttribute("aria-hidden", "true");
            dotsWrap.appendChild(d);
          });
        }

        function goTo(i){
          index = clamp(i, slides.length);
          track.style.transform = "translateX(" + (-index * 100) + "%)";
          renderDots();
        }

        function next(){ goTo(index + 1); }
        function prev(){ goTo(index - 1); }

        let timer = null;

        function stop(){
          if(timer){
            window.clearInterval(timer);
            timer = null;
          }
        }

        function start(){
          if(!autoplay || reduceMotion) return;
          if(timer) return;
          timer = window.setInterval(next, Math.max(2000, intervalMs));
        }

        if(prevBtn) prevBtn.addEventListener("click", function(){ stop(); prev(); start(); });
        if(nextBtn) nextBtn.addEventListener("click", function(){ stop(); next(); start(); });

        let startX = null;
        let dragging = false;

        function onPointerDown(e){
          if(e.pointerType === "mouse") return;
          dragging = true;
          startX = e.clientX;
          stop();
        }

        function onPointerUp(e){
          if(!dragging) return;
          dragging = false;

          const dx = e.clientX - startX;
          startX = null;

          const threshold = 35;
          if(dx > threshold) prev();
          else if(dx < -threshold) next();

          start();
        }

        root.addEventListener("pointerdown", onPointerDown, { passive: true });
        root.addEventListener("pointerup", onPointerUp, { passive: true });
        root.addEventListener("pointercancel", function(){ dragging = false; startX = null; start(); }, { passive: true });

        root.addEventListener("mouseenter", stop);
        root.addEventListener("mouseleave", start);
        root.addEventListener("focusin", stop);
        root.addEventListener("focusout", start);

        window.addEventListener("resize", function(){ goTo(index); }, { passive: true });

        goTo(0);
        start();
      }

      document.addEventListener("DOMContentLoaded", function(){
        document.querySelectorAll(".mbwCarousel").forEach(initCarousel);
      });
    })();
  </script>
</body>
</html>
