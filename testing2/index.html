<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Book a Tour | Mindo Bird Watching</title>
  <meta name="description" content="Request a birdwatching tour in Mindo, Ecuador. Share dates, group size, and goals, and we will confirm details and follow up quickly by email or WhatsApp." />
  <link rel="canonical" href="https://mindobirdwatching.com/book-tour/" />
  <link rel="alternate" hreflang="en" href="/book-tour/" />
  <link rel="alternate" hreflang="es" href="/es/reservar-tour/" />
  <link rel="alternate" hreflang="x-default" href="/book-tour/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Mindo Bird Watching" />
  <meta property="og:title" content="Book a Tour | Mindo Bird Watching" />
  <meta property="og:description" content="Request a birdwatching tour in Mindo, Ecuador. Share dates, group size, and goals, and we will confirm details and follow up quickly by email or WhatsApp." />
  <meta property="og:url" content="https://mindobirdwatching.com/book-tour/" />
  <meta property="og:image" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.jpg" />
  <meta property="og:image:secure_url" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Mindo Bird Watching - Cloud forest birding tours in Ecuador" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Book a Tour | Mindo Bird Watching" />
  <meta name="twitter:description" content="Request a birdwatching tour in Mindo, Ecuador. Share dates, group size, and goals, and we will confirm details and follow up quickly by email or WhatsApp." />
  <meta name="twitter:image" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.jpg" />
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#034EA2">
  <link rel="stylesheet" href="/assets/css/site.css" />
  <link rel="stylesheet" href="/assets/css/header.css" />
  <link rel="stylesheet" href="/assets/css/footer.css" />
  <script src="/assets/js/head.js" defer></script>
  <style>
    /* Page-only styles (main content only) */
    .page{ margin-top:18px; padding:26px; }
    .page.card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
    }

    .layout{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 16px;
      align-items:start;
    }

    .leftStack{
      display:grid;
      gap: 18px;
      align-content:start;
      min-width:0;
    }

    .rightStack{
      display:grid;
      gap: 12px;
      align-content:start;
      min-width:0;
    }

    .heroLeft{
      display:grid;
      gap: 12px;
      align-content:start;
      justify-items:stretch;
      min-width: 0;
    }
    .heroLeft > *{ min-width: 0; }

    h1{ margin:0 0 10px; letter-spacing:-0.02em; }

    .lede{
      margin:0;
      max-width: 92ch;
      color: var(--ink);
      line-height: 1.65;
    }

    .metaCard{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 14px;
      display:grid;
      gap: 10px;
    }

    .chips{
      display:flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items:center;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.55);
      font-weight: 900;
      color: var(--ink);
      font-size: 12.5px;
      line-height: 1;
      white-space: nowrap;
    }

    .note{
      margin:0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55;
    }

    .heroRight{
      display:grid;
      gap: 12px;
      align-content:start;
      min-width: 0;
    }

    .heroImageCard{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .heroImageFrame{
      width:100%;
      aspect-ratio: 4 / 3;
      background: rgba(255,255,255,.55);
    }

    .heroImageFrame img{
      width:100%;
      height:100%;
      display:block;
      object-fit: cover;
      object-position: center;
      background: rgba(255,255,255,.55);
    }

    .heroImageBar{
      padding: 12px 14px;
      border-top: 1px solid var(--line);
      background: rgba(255,255,255,.55);
      display:flex;
      justify-content:space-between;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .heroImageTitle{
      margin:0;
      font-weight: 900;
      color: var(--ink);
      font-size: 13.5px;
      letter-spacing: -0.01em;
    }

    .heroImageTag{
      display:inline-flex;
      align-items:center;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.55);
      font-weight: 900;
      color: var(--ink);
      font-size: 12.5px;
      line-height: 1;
      white-space: nowrap;
    }

    .heroActions{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 14px;
      display:grid;
      gap: 10px;
    }

    .heroActions .quickRow{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
    }

    .heroActions .btn{
      min-height:46px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      white-space: nowrap;
    }

    .iconBtn{
      width: 46px;
      height: 46px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.55);
      box-shadow: var(--shadow);
      cursor: pointer;
      padding: 0;
    }
    .iconBtn svg{ width: 18px; height: 18px; fill: var(--ink); opacity: .9; }

    .toast{
      display:none;
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(3,78,162,.22);
      background: rgba(3,78,162,.10);
      color: var(--ink);
      font-weight: 900;
      font-size: 12.5px;
      line-height: 1.35;
    }

    .glance{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 14px;
      display:grid;
      gap: 10px;
    }

    .glanceGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      align-items:start;
    }

    .glanceItem{
      border: 1px solid var(--line);
      border-radius: 14px;
      background: rgba(255,255,255,.55);
      padding: 10px 12px;
      display:grid;
      gap: 4px;
      min-width: 0;
    }

    .glanceK{
      font-weight: 950;
      color: var(--ink);
      font-size: 12.5px;
      letter-spacing: -0.01em;
      line-height: 1.15;
    }

    .glanceV{
      color: var(--ink);
      opacity: .95;
      font-size: 13px;
      line-height: 1.35;
    }

    .section{
      padding-top: 14px;
      border-top: 1px solid var(--line);
    }

    .sectionHead{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .sectionHead h2{
      margin:0;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing:-0.02em;
      font-size: 20px;
    }

    .cardBox{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    .form{
      display:grid;
      gap: 10px;
      margin-top: 10px;
    }

    .row2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      align-items:start;
    }

    .rowPhone{
      display:grid;
      grid-template-columns: 120px 1fr;
      gap: 10px;
      align-items:end;
    }

    label{
      display:grid;
      gap: 6px;
      font-weight: 900;
      font-size: 13px;
      color: var(--ink);
      min-width: 0;
      width: 100%;
    }

    .labelText{
      display:inline-flex;
      align-items:baseline;
      gap: 2px;
      line-height: 1.1;
    }

    .req{
      color: rgba(160,0,0,.85);
      font-weight: 950;
      margin-left: 0;
    }

    input, select, textarea{
      width: 100%;
      max-width: 100%;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.70);
      box-shadow: 0 10px 25px rgba(0,0,0,.06);
      padding: 12px 12px;
      font: inherit;
      color: var(--ink);
      outline: none;
      box-sizing: border-box;
      min-width: 0;
      display: block;
    }

    input, select{
      height: 46px;
      line-height: 46px;
      padding-top: 0;
      padding-bottom: 0;
    }

    textarea{
      min-height: 120px;
      resize: vertical;
      padding: 12px 12px;
      line-height: 1.5;
      height: auto;
    }

    .help{
      margin: 0;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.5;
    }

    .success{
      display:none;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(13,89,37,.25);
      background: rgba(13,89,37,.10);
      color: var(--ink);
      font-weight: 900;
      margin-top: 10px;
    }

    .errorMsg{
      display:none;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(160,0,0,.22);
      background: rgba(160,0,0,.08);
      color: var(--ink);
      font-weight: 900;
      margin-top: 10px;
      font-size: 12.5px;
      line-height: 1.35;
    }

    .rowDatesGuests{
      grid-template-columns: minmax(0, 1fr) 132px;
      align-items:start;
      column-gap: 10px;
    }
    .rowDatesGuests > label{ min-width: 0; }

    .rowDatesGuests .guestsLabel{
      width: 100%;
      min-width: 0;
      justify-self: end;
      align-content: start;
    }
    .rowDatesGuests .guestsLabel .labelText{ white-space: nowrap; }
    .rowDatesGuests .guestsLabel select{
      width: 100%;
      min-width: 0;
      padding-left: 12px;
      padding-right: 34px;
    }

    .dateRange{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      align-items:start;
      width: 100%;
      min-width: 0;
      max-width: 100%;
    }
    .dateRange, .dateRange *{ max-width: 100%; }

    .dateRange > input{
      width: 100%;
      min-width: 176px;
      min-inline-size: 0;
    }

    input[type="date"]{
      width: 100%;
      max-width: 100%;
      min-inline-size: 0;
      display: block;
      box-sizing: border-box;
      -webkit-appearance: none;
      appearance: none;
      background-clip: padding-box;
      padding-right: 32px;
    }

    .dateHint{
      margin: 0;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.5;
    }

    .ctaActions{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 12px;
      align-items: stretch;
    }

    .ctaActions .btn,
    .ctaActions button.btn{
      width: 100%;
      justify-content: center;
      font-size: 14px;
      font-weight: 900;
      line-height: 1;
      padding-top: 14px;
      padding-bottom: 14px;
      min-height: 46px;
    }

    .btn[disabled]{
      opacity: .65;
      cursor: not-allowed;
      transform: none !important;
    }

    @media (max-width: 980px){
      .layout{ grid-template-columns: 1fr; }
      .row2{ grid-template-columns: 1fr; }
      .rowDatesGuests{ grid-template-columns: 1fr; }
      .rowPhone{ grid-template-columns: 120px 1fr; }
      .ctaActions{ grid-template-columns: 1fr; }
      .dateRange{ grid-template-columns: 1fr; }
      .dateRange > input{ min-width: 0; }
      .rowDatesGuests .guestsLabel{ width: 100%; justify-self: stretch; }
      .rowDatesGuests .guestsLabel select{ width: 100%; min-width: 0; }
      .rowDatesGuests .guestsLabel .labelText{ white-space: normal; }
      .glanceGrid{ grid-template-columns: 1fr; }
    }

    @media (max-width: 640px){
      .page{ margin-top:14px; padding:16px; }
      .metaCard, .glance, .heroActions{ padding: 12px; }
      .heroImageBar{ padding: 10px 12px; }
      .heroActions .btn{ width:100%; }
      .heroActions .quickRow{ gap: 10px; }
      .heroActions .quickRow .btn{ flex: 1 1 auto; }
      .iconBtn{ width:46px; height:46px; }
    }

    @media (max-width: 420px){
      .rowPhone{ grid-template-columns: 1fr; }
    }

    @media (min-width:901px){
      .promoFill{display:block;}
    }

  </style>
</head>
<body>
  <div class="container">
    <div id="siteHeader"></div>
<main class="page card">
  <div class="layout" aria-label="Book a tour layout grid">
    <div class="leftStack" id="leftStack" aria-label="Left content stack">
      <section class="heroLeft" aria-label="Book a tour intro">
        <h1>Book a Tour</h1>
        <p class="lede">
          Share your dates, group size, and goals. We will confirm details and follow up quickly.
        </p>

        <div class="metaCard" aria-label="Booking metadata">
          <div class="chips">
            <span class="chip">Mindo, Ecuador</span>
            <span class="chip">Email or WhatsApp reply</span>
            <span class="chip">Private and custom options</span>
          </div>
          <p class="note">Fields marked with <span class="req">*</span> are required.</p>
        </div>

        <div class="glance" aria-label="At a glance">
          <div class="chips" aria-label="At a glance chips">
            <span class="chip">At a glance</span>
            <span class="chip">2 to 3 minutes</span>
            <span class="chip">No payment required</span>
          </div>

          <div class="glanceGrid" aria-label="At a glance grid">
            <div class="glanceItem">
              <div class="glanceK">Best to include</div>
              <div class="glanceV">Target birds, pace, and photo priority.</div>
            </div>
            <div class="glanceItem">
              <div class="glanceK">Dates</div>
              <div class="glanceV">Start date is enough, end date is optional.</div>
            </div>
            <div class="glanceItem">
              <div class="glanceK">Group size</div>
              <div class="glanceV">Helps us match guide time and logistics.</div>
            </div>
            <div class="glanceItem">
              <div class="glanceK">Follow up</div>
              <div class="glanceV">We confirm availability and the best plan for your goals.</div>
            </div>
          </div>
        </div>
      </section>

      <section class="section" aria-label="Book tour form" id="request-form">
        <div class="sectionHead">
          <h2>Request Your Tour</h2>
          <p class="note">We will reply with availability, timing, and next steps.</p>
        </div>

        <div class="cardBox">
          <iframe name="mbwHiddenFrame" id="mbwHiddenFrame" style="position:absolute; left:-9999px; width:1px; height:1px; border:0;" aria-hidden="true" tabindex="-1"></iframe>

          <form class="form" id="bookTourForm"
            method="post"
            target="mbwHiddenFrame"
            action="/api/book-tour">

            <div class="row2">
              <label>
                <span class="labelText">First Name<span class="req">*</span></span>
                <input type="text" name="first_name" id="firstName" autocomplete="given-name" autocapitalize="words" autocorrect="off" spellcheck="false" placeholder="First name" required />
              </label>

              <label>
                <span class="labelText">Last Name<span class="req">*</span></span>
                <input type="text" name="last_name" id="lastName" autocomplete="family-name" autocapitalize="words" autocorrect="off" spellcheck="false" placeholder="Last name" required />
              </label>
            </div>

            <div class="row2">
              <label>
                <span class="labelText">Email<span class="req">*</span></span>
                <input type="email" name="email" autocomplete="email" placeholder="you@example.com" required />
              </label>

              <label>
                <span class="labelText">How Did You Hear About Us?</span>
                <input type="text" name="how_did_you_hear_about_us" placeholder="Google, Instagram, friend, hotel, etc." />
              </label>
            </div>

            <div class="rowPhone">
              <label>
                <span class="labelText">Country Code<span class="req">*</span></span>
                <input type="text" name="country_code" inputmode="numeric" pattern="[0-9]{1,4}" placeholder="1" value="1" required />
              </label>

              <label>
                <span class="labelText">Phone / WhatsApp Number<span class="req">*</span></span>
                <input type="tel" name="phone_number" autocomplete="tel" inputmode="tel" placeholder="123 456 7890" required />
              </label>
            </div>

            <label>
              <span class="labelText">Message / Questions<span class="req">*</span></span>
              <textarea name="message_questions" placeholder="Share your goals: target birds, photography, pace, private guide, and any timing notes." required></textarea>
            </label>

            <div class="row2 rowDatesGuests">
              <label>
                <span class="labelText">Dates of Visit</span>
                <div class="dateRange">
                  <input type="date" id="dateStart" autocomplete="off" />
                  <input type="date" id="dateEnd" autocomplete="off" />
                </div>
                <p class="dateHint">Select a start date and an optional end date.</p>
                <input type="hidden" name="dates_of_visit" id="datesCombined" value="" />
              </label>

              <label class="guestsLabel">
                <span class="labelText">Number of Guests</span>
                <select name="number_of_guests">
                  <option value="">Select</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3 to 4</option>
                  <option>5 to 8</option>
                  <option>9+</option>
                </select>
              </label>
            </div>

            <label>
              <span class="labelText">Preferred Tour Type</span>
              <select name="preferred_tour_type">
                <option value="">Select</option>
                <option>Half-Day Tour</option>
                <option>Full-Day Tour</option>
                <option>Custom / Private Tour</option>
                <option>Not Sure Yet</option>
              </select>
            </label>

            <label>
              <span class="labelText">Accommodation Needs</span>
              <input type="text" name="accommodation_needs" placeholder="Optional (hotel name, pickup notes, etc.)" />
            </label>

            <label>
              <span class="labelText">Special Interests</span>
              <input type="text" name="special_interests" placeholder="Photography, hummingbirds, tanagers, night walk, etc." />
            </label>

            <input type="hidden" name="source_page" id="sourcePage" value="" />
            <input type="hidden" name="user_agent" id="uaField" value="" />

            <!-- Cloudflare Turnstile -->
            <div class="cf-turnstile" data-sitekey="0x4AAAAAACYIFF7ZNXiqieGk"></div>

            <div style="position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden;" aria-hidden="true">
              <label>Website <input type="text" name="website" tabindex="-1" autocomplete="off" /></label>
            </div>

            <input type="hidden" name="ts_start" id="tsStart" value="" />
            <script>
              (function(){
                var el = document.getElementById("tsStart");
                if (el) el.value = String(Date.now());
              })();
            </script>

            <p class="help">
              After you submit, you will receive an email confirmation. If you do not see it, check Spam or Promotions.
            </p>

            <div class="ctaActions">
              <button class="btn primary" id="submitBtn" type="submit">Send Request</button>
              <a class="btn secondary" href="/tours/">View Tours</a>
            </div>

            <div class="success" id="formSuccessMsg">Your request has been sent. We will email you a confirmation shortly.</div>
            <div class="errorMsg" id="formErrorMsg">Something went wrong. Please try again, or email us at mindobirdwatching@gmail.com.</div>
          </form>
        </div>
      </section>
    </div>

    <aside class="rightStack" id="rightStack" aria-label="Right content stack">
      <div class="heroRight" aria-label="Hero image and actions">
        <div class="heroImageCard" aria-label="Tour booking image">
          <div class="heroImageFrame">
            <img src="/assets/images/pages/tours/MBW-Tours-Custom-Tour.jpg" alt="Birdwatching in Mindo cloud forest with a guide" loading="lazy" decoding="async" />
          </div>
          <div class="heroImageBar">
            <p class="heroImageTitle">Book a Tour</p>
            <span class="heroImageTag">4:3 Photo</span>
          </div>
        </div>

        <div class="heroActions" aria-label="Quick actions">
          <div class="quickRow" aria-label="Primary actions">
            <a class="btn primary" href="#request-form">Send request</a>
            <a class="btn secondary" href="/tours/">View tours</a>
          </div>

          <div class="sectionHead" style="margin:4px 0 0; padding:0; border:0;">
            <p class="note" style="margin:0;">Prefer direct contact? Use email or WhatsApp.</p>
          </div>

          <div class="quickRow" aria-label="Email actions">
            <a class="btn secondary" id="emailBtn" href="mailto:mindobirdwatching@gmail.com?subject=Book%20a%20Tour%20Request%20-%20Mindo%20Bird%20Watching">Email us</a>
            <button class="iconBtn" type="button" id="copyEmailBtn" aria-label="Copy email address">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M16 1H6a2 2 0 0 0-2 2v12h2V3h10V1zm3 4H10a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16h-9V7h9v14z"/>
              </svg>
            </button>
          </div>
          <div class="toast" id="copyToast">Copied: mindobirdwatching@gmail.com</div>

          <a class="btn secondary" href="https://wa.me/13054585402" target="_blank" rel="noopener noreferrer">Message on WhatsApp</a>
        </div>
      </div>

      <div class="cardBox" aria-label="What helps us reply faster">
        <h3 style="margin:0 0 8px; font-family:var(--font-head); color:var(--forest); letter-spacing:-0.02em;">What helps us reply faster</h3>
        <ul style="margin:0; padding-left:18px; line-height:1.7; color:var(--ink);">
          <li>Target species (if any)</li>
          <li>Photography priority vs. bird list priority</li>
          <li>Preferred pace (relaxed vs. intensive)</li>
          <li>Private guide request (yes or no)</li>
          <li>Any mobility or timing constraints</li>
        </ul>
        <p class="note" style="margin-top:10px;">
          Share what you know now. We can refine details after we confirm availability.
        </p>
      </div>
    

      <div class="promoFill" id="promoFill" aria-hidden="true">
        <img src="/assets/images/pages/mbw_assets_pages_about_us_02.jpg" alt="Tour options" loading="lazy" decoding="async">
      </div>
</aside>
  </div>
</main>

<div id="siteFooter"></div>
  </div>
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
  <script>
    (function(){
      var ua = document.getElementById("uaField");
      if(ua) ua.value = navigator.userAgent || "";

      var sp = document.getElementById("sourcePage");
      if(sp) sp.value = window.location.href;

      function trackGA(eventName, params){
        try{
          if(typeof window.gtag === "function"){
            window.gtag("event", eventName, params || {});
            return true;
          }
        }catch(e){}
        return false;
      }

      function titleCaseWords(str){
        return String(str || "")
          .trim()
          .replace(/\s+/g, " ")
          .split(" ")
          .map(function(w){
            if(!w) return "";
            var lower = w.toLowerCase();
            return lower.charAt(0).toUpperCase() + lower.slice(1);
          })
          .join(" ");
      }

      function attachNameAutoCap(id){
        var el = document.getElementById(id);
        if(!el) return;
        el.addEventListener("blur", function(){
          el.value = titleCaseWords(el.value);
        });
      }
      attachNameAutoCap("firstName");
      attachNameAutoCap("lastName");

      function combineDates(){
        var s = document.getElementById("dateStart");
        var e = document.getElementById("dateEnd");
        var out = document.getElementById("datesCombined");
        if(!out) return;

        var start = (s && s.value) ? s.value : "";
        var end = (e && e.value) ? e.value : "";

        if(start && end) out.value = start + " to " + end;
        else if(start) out.value = start;
        else out.value = "";
      }
      var ds = document.getElementById("dateStart");
      var de = document.getElementById("dateEnd");
      if(ds) ds.addEventListener("change", combineDates);
      if(de) de.addEventListener("change", combineDates);
      combineDates();

      var copyBtn = document.getElementById("copyEmailBtn");
      var toast = document.getElementById("copyToast");
      var email = "mindobirdwatching@gmail.com";
      function showToast(){
        if(!toast) return;
        toast.style.display = "block";
        clearTimeout(window.__mbwCopyT);
        window.__mbwCopyT = setTimeout(function(){
          toast.style.display = "none";
        }, 1800);
      }
      if(copyBtn){
        copyBtn.addEventListener("click", function(){
          try{
            if(navigator.clipboard && navigator.clipboard.writeText){
              navigator.clipboard.writeText(email).then(showToast).catch(function(){});
              return;
            }
          }catch(e){}
          try{
            var ta = document.createElement("textarea");
            ta.value = email;
            ta.setAttribute("readonly", "readonly");
            ta.style.position = "absolute";
            ta.style.left = "-9999px";
            document.body.appendChild(ta);
            ta.select();
            document.execCommand("copy");
            document.body.removeChild(ta);
            showToast();
          }catch(e){}
        });
      }

      var form = document.getElementById("bookTourForm");
      var successEl = document.getElementById("formSuccessMsg");
      var errorEl = document.getElementById("formErrorMsg");
      var submitBtn = document.getElementById("submitBtn");
      var iframe = document.getElementById("mbwHiddenFrame");

      var pending = false;
      var done = false;
      var fallbackTimer = null;

      function hideMsgs(){
        if(successEl) successEl.style.display = "none";
        if(errorEl) errorEl.style.display = "none";
      }

      function setBtnSending(isSending){
        if(!submitBtn) return;
        if(isSending){
          submitBtn.setAttribute("disabled", "disabled");
          submitBtn.textContent = "Sending...";
        }else{
          submitBtn.removeAttribute("disabled");
          submitBtn.textContent = "Send Request";
        }
      }

      function completeOk(){
        if(done) return;
        done = true;
        pending = false;
        if(fallbackTimer) clearTimeout(fallbackTimer);
        setBtnSending(false);
        if(successEl) successEl.style.display = "block";
        if(errorEl) errorEl.style.display = "none";

        trackGA("request_tour_submit_en", {
          form_id: "bookTourForm",
          form_name: "request_tour",
          page_path: window.location.pathname || "/book-tour/",
          page_location: window.location.href
        });

        try{
          form.reset();
          if(ds) ds.value = "";
          if(de) de.value = "";
          combineDates();
          if(ua) ua.value = navigator.userAgent || "";
          if(sp) sp.value = window.location.href;
        }catch(e){}
      }

      function completeError(msg){
        if(done) return;
        done = true;
        pending = false;
        if(fallbackTimer) clearTimeout(fallbackTimer);
        setBtnSending(false);
        if(errorEl){
          errorEl.textContent = msg || "Something went wrong. Please try again, or email us at mindobirdwatching@gmail.com.";
          errorEl.style.display = "block";
        }
        if(successEl) successEl.style.display = "none";
      }

      hideMsgs();

      if(form){
        form.addEventListener("submit", function(){
          hideMsgs();
          done = false;
          pending = true;

        // If no postMessage arrives, do not assume success
        window.setTimeout(function(){
          if (pending && !done){
            completeErr("Submission did not complete. Please try again. If this continues, email mindobirdwatching@gmail.com.");
          }
        }, 10000);
          setBtnSending(true);

          if(fallbackTimer) clearTimeout(fallbackTimer);
          fallbackTimer = setTimeout(function(){
            if(!done){
              completeError("Still waiting. Please try again, or email us at mindobirdwatching@gmail.com.");
            }
          }, 12000);
        });
      }

      if(iframe){
        /* iframe load fallback disabled: success requires postMessage */
}

      window.addEventListener("message", function(ev){
        var data = ev && ev.data ? ev.data : null;
        if(!data) return;

        if(data.type === "mbw-booktour" && data.status === "ok"){
          completeOk();
          return;
        }
        if(data.type === "mbw-booktour" && data.status === "error"){
          completeError(data.message ? (data.message) : null);
        }
      });
    })();
  </script>
  <script src="/assets/js/includes.js?v=1" defer></script>
  <script src="/assets/js/site.js?v=1" defer></script>

<script>
(function(){
  function fitPromo(){
    var left = document.getElementById('leftStack');
    var right = document.getElementById('rightStack');
    var promo = document.getElementById('promoFill');
    if (!left || !right || !promo) return;

    // Reset so we can measure natural heights
    promo.style.height = 'auto';

    // After layout, compute required promo height so right column matches left column
    requestAnimationFrame(function(){
      var leftH = left.getBoundingClientRect().height;
      var rightH = right.getBoundingClientRect().height;
      var promoH = promo.getBoundingClientRect().height;

      // rightH includes promo already. Remove promo to get the non-promo height.
      var nonPromoH = rightH - promoH;

      // Target promo height so total right == left
      var target = Math.max(220, leftH - nonPromoH);

      promo.style.height = target + 'px';
    });
  }

  // Run after everything is laid out and images are available
  window.addEventListener('load', fitPromo);
  window.addEventListener('resize', function(){
    clearTimeout(window.__fitPromoT);
    window.__fitPromoT = setTimeout(fitPromo, 120);
  });

  // Safety: also run after DOM ready
  document.addEventListener('DOMContentLoaded', function(){
    setTimeout(fitPromo, 0);
    setTimeout(fitPromo, 300);
  });
})();
</script>

</body>
</html>
