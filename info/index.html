<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Staff Info | Mindo Bird Watching</title>
  <meta name="description" content="Internal staff reference page for Mindo Bird Watching. Quick filters, copy-ready answers, pricing, and links for fast customer responses." />
  <link rel="canonical" href="https://staging.mindobirdwatching.com/info/" />

  <meta name="robots" content="noindex,nofollow" />

  <!-- Favicons (approved root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#034EA2">

  <!-- Global / shared CSS -->
  <link rel="stylesheet" href="/assets/css/site.css">
  <link rel="stylesheet" href="/assets/css/header.css?v=1">

  <!-- Head-only JS -->
  <script src="/assets/js/head.js" defer></script>

  <style>
    /* Page-only styles (main content only) */
    .page{ margin-top:18px; padding:22px; }
    .page.card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
    }

    .hero{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 14px;
      flex-wrap: wrap;
      margin-bottom: 12px;
    }

    h1{
      margin:0;
      letter-spacing:-0.02em;
      line-height:1.1;
    }

    .lede{
      margin:8px 0 0;
      color: var(--muted);
      line-height: 1.55;
      max-width: 92ch;
      font-size: 13.5px;
    }

    .controlsRow{
      width:100%;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content: space-between;
      margin-top: 12px;
    }

    .leftControls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      min-width: 0;
    }

    .rightControls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .pill{
      border: 1px solid var(--line);
      border-radius: 999px;
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 8px 12px;
      display:flex;
      align-items:center;
      gap: 10px;
      height: 44px;
      box-sizing: border-box;
      min-width: 0;
    }

    .pill label{
      font-weight: 900;
      font-size: 12.5px;
      color: var(--muted);
      white-space: nowrap;
    }

    .pill select,
    .pill input{
      border: 0;
      outline: 0;
      background: transparent;
      color: var(--ink);
      font-weight: 800;
      min-width: 150px;
      width: 100%;
      padding: 0;
      height: 28px;
      line-height: 28px;
      box-sizing: border-box;
    }

    .pill select{ appearance:auto; }

    .btnRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .btnRow .btn{ height:44px; display:inline-flex; align-items:center; justify-content:center; }

    .section{
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px solid var(--line);
    }

    .cards{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .cardItem{
      border: 1px solid var(--line);
      border-radius: 22px;
      background: rgba(255,255,255,.70);
      box-shadow: var(--shadow);
      overflow:hidden;
      min-width: 0;
    }

    .cardTop{
      padding: 14px;
      background: rgba(255,255,255,.55);
      border-bottom: 1px solid var(--line);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      min-width: 0;
    }

    .cardTitleWrap{
      min-width: 0;
      display:grid;
      gap: 6px;
    }

    .cardTitle{
      margin:0;
      font-weight: 950;
      color: var(--ink);
      letter-spacing: -0.01em;
      line-height: 1.2;
      font-size: 15px;
    }

    .cardMeta{
      display:flex;
      gap: 8px;
      flex-wrap:wrap;
      align-items:center;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.55);
      font-weight: 900;
      color: var(--ink);
      font-size: 12px;
      line-height: 1;
      white-space: nowrap;
    }

    .cardBody{
      padding: 14px;
      display:grid;
      gap: 12px;
      min-width: 0;
    }

    .textBlock{
      border: 1px solid var(--line);
      border-radius: 18px;
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 12px;
      display:grid;
      gap: 10px;
      min-width: 0;
    }

    .textBlockTop{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap: 10px;
      flex-wrap:wrap;
    }

    .textLabel{
      margin:0;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing:-0.02em;
      font-size: 13.5px;
      line-height: 1.25;
      font-weight: 950;
    }

    .copyBtn{
      border: 1px solid var(--line);
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      padding: 7px 10px;
      font-weight: 950;
      font-size: 12px;
      line-height: 1;
      cursor:pointer;
      color: var(--ink);
      white-space: nowrap;
    }

    .copyBtn:active{ transform: translateY(1px); }
    .copyBtn:focus-visible{ outline: 2px solid rgba(3,78,162,.35); outline-offset: 2px; }

    .textBody{
      margin:0;
      color: var(--ink);
      line-height: 1.65;
      font-size: 14px;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .imgBlock{
      border: 1px solid var(--line);
      border-radius: 18px;
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 12px;
      display:grid;
      gap: 10px;
      min-width: 0;
    }

    .imgPreview{
      width:100%;
      max-width: 560px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:block;
    }

    .imgPreview img{
      width:100%;
      height:auto;
      display:block;
      max-height: 260px;
      object-fit: contain;
      background: transparent;
    }

    .imgActions{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .socialDock{
      margin-top: 14px;
      border-top: 1px solid var(--line);
      padding-top: 14px;
      display:grid;
      gap: 10px;
    }

    .socialTitle{
      margin:0;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing:-0.02em;
      font-size: 15px;
      line-height: 1.25;
      font-weight: 950;
    }

    .socialGrid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      align-items:start;
    }

    .socialItem{
      border: 1px solid var(--line);
      border-radius: 18px;
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      min-width: 0;
    }

    .socialLeft{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width: 0;
    }

    .ico{
      width: 24px;
      height: 24px;
      flex: 0 0 auto;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.10));
    }

    .socialName{
      font-weight: 950;
      color: var(--ink);
      font-size: 13px;
      line-height: 1.1;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    @media (max-width: 1100px){
      .socialGrid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    @media (max-width: 900px){
      .page{ padding:16px; margin-top:14px; }
      .controlsRow{ flex-direction: column; align-items: stretch; }
      .leftControls{ width:100%; display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
      .rightControls{ width:100%; }
      .pill{ width:100%; }
      .pill select, .pill input{ min-width: 0; }
      .btnRow{ width:100%; }
      .btnRow .btn{ flex: 1 1 100%; }
      .cardTop{ flex-direction: column; align-items: flex-start; }
      .imgPreview{ max-width: 100%; }
      .imgPreview img{ max-height: 220px; }
      .socialGrid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="container">
    <div id="siteHeader"></div>

    <main class="page card" aria-label="Staff info">
      <div class="hero">
        <div>
          <h1>Staff Info</h1>
          <p class="lede" id="ledeText">Quick, copy-ready answers for calls and messages.</p>
        </div>
      </div>

      <div class="controlsRow" aria-label="Filters">
        <div class="leftControls">
          <div class="pill" aria-label="Language">
            <label for="langSel">Language</label>
            <select id="langSel">
              <option value="en">English</option>
              <option value="es">Espanol</option>
            </select>
          </div>

          <div class="pill" aria-label="Subject">
            <label for="subSel">Subject</label>
            <select id="subSel"></select>
          </div>

          <div class="pill" aria-label="Topic">
            <label for="topicSel">Topic</label>
            <select id="topicSel"></select>
          </div>

          <div class="pill" aria-label="Search">
            <label for="q">Search</label>
            <input id="q" type="search" placeholder="Search..." autocomplete="off" />
          </div>
        </div>

        <div class="rightControls">
          <div class="btnRow">
            <button class="btn secondary" id="copyBookBtn" type="button">Copy booking link</button>
            <button class="btn secondary" id="copyWhatsBtn" type="button">Copy WhatsApp message</button>
          </div>
        </div>
      </div>

      <section class="section" aria-label="Results">
        <div class="cards" id="cards"></div>

        <div class="socialDock" aria-label="Social links">
          <p class="socialTitle" id="socialTitle">Social links</p>
          <div class="socialGrid" id="socialGrid"></div>
        </div>
      </section>
    </main>

    <div id="siteFooter"></div>
  </div>

  <script>
    (function(){
      "use strict";

      async function inject(id, url){
        const el = document.getElementById(id);
        if(!el) return;
        const res = await fetch(url, { cache: "no-store" });
        el.innerHTML = await res.text();
      }

      function loadScript(src){
        return new Promise((resolve, reject) => {
          const s = document.createElement("script");
          s.src = src;
          s.defer = true;
          s.onload = resolve;
          s.onerror = reject;
          document.body.appendChild(s);
        });
      }

      (async function(){
        await inject("siteHeader", "/assets/includes/header.html");
        await inject("siteFooter", "/assets/includes/footer.html");
        await loadScript("/assets/js/site.js");
      })();

      const BASE = window.location.origin;

      const ICONS = {
        instagram: "/assets/images/icons/MBW-IG.png",
        tiktok: "/assets/images/icons/MBW-Social-TikTok.png",
        facebook: "/assets/images/icons/MBW-Social-FB-01.png",
        youtube: "/assets/images/icons/MBW-Social-YouTube.png",
        shop: "/assets/images/icons/MBW-Social-Shopify.png",
        review: "/assets/images/icons/Google-Review-Symbol.png"
      };

      const state = {
        data: null,
        lang: "en",
        subject: "",
        topic: "",
        q: ""
      };

      const elLang = document.getElementById("langSel");
      const elSub = document.getElementById("subSel");
      const elTopic = document.getElementById("topicSel");
      const elQ = document.getElementById("q");
      const elCards = document.getElementById("cards");
      const elCopyBook = document.getElementById("copyBookBtn");
      const elCopyWhats = document.getElementById("copyWhatsBtn");
      const elSocialGrid = document.getElementById("socialGrid");
      const elSocialTitle = document.getElementById("socialTitle");
      const elLede = document.getElementById("ledeText");

      function esc(s){
        return String(s || "")
          .replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")
          .replace(/"/g,"&quot;").replace(/'/g,"&#39;");
      }

      function absUrl(u){
        const s = String(u || "").trim();
        if(!s) return "";
        if(/^https?:\/\//i.test(s)) return s;
        if(s.startsWith("/")) return BASE + s;
        return BASE + "/" + s;
      }

      async function copyText(txt){
        const t = String(txt || "");
        if(!t) return;
        try{
          await navigator.clipboard.writeText(t);
        }catch(_){
          const ta = document.createElement("textarea");
          ta.value = t;
          ta.style.position = "fixed";
          ta.style.left = "-9999px";
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
        }
      }

      function setPillOptions(selectEl, values, preferred){
        selectEl.innerHTML = values.map(v => {
          const sel = (v === preferred) ? " selected" : "";
          return "<option value=\"" + esc(v) + "\"" + sel + ">" + esc(v) + "</option>";
        }).join("");
      }

      function getLangLabel(){
        return (state.lang === "es") ? "Espanol" : "English";
      }

      function refreshBookingButtons(){
        const bookPath = (state.lang === "es") ? "/es/reservar-tour/" : "/book-tour/";
        const bookUrl = absUrl(bookPath);

        const waText = (state.lang === "es")
          ? "Hola, gracias por escribir a Mindo Bird Watching. En que te podemos ayudar?"
          : "Hi, thanks for reaching out to Mindo Bird Watching. How can we help?";

        elCopyBook.onclick = () => copyText(bookUrl);
        elCopyWhats.onclick = () => copyText(waText);

        elCopyBook.textContent = (state.lang === "es") ? "Copiar enlace de reserva" : "Copy booking link";
        elCopyWhats.textContent = (state.lang === "es") ? "Copiar mensaje WhatsApp" : "Copy WhatsApp message";
        elSocialTitle.textContent = (state.lang === "es") ? "Links para copiar" : "Copy links";
        elLede.textContent = (state.lang === "es")
          ? "Respuestas rapidas para llamadas y mensajes."
          : "Quick, copy-ready answers for calls and messages.";
      }

      function fillSubjects(){
        const langObj = (state.data && state.data.languages && state.data.languages[state.lang]) ? state.data.languages[state.lang] : {};
        const subjects = Object.keys(langObj).sort();
        const preferred = subjects.includes(state.subject) ? state.subject : (subjects[0] || "");
        state.subject = preferred;
        setPillOptions(elSub, subjects, preferred);
      }

      function fillTopics(){
        const langObj = state.data.languages[state.lang] || {};
        const subjObj = langObj[state.subject] || {};
        const topics = Object.keys(subjObj).sort();
        const preferred = topics.includes(state.topic) ? state.topic : (topics[0] || "");
        state.topic = preferred;
        setPillOptions(elTopic, topics, preferred);
      }

      function getItems(){
        const langObj = state.data.languages[state.lang] || {};
        const subjObj = langObj[state.subject] || {};
        const items = subjObj[state.topic] || [];
        return items;
      }

      function isFAQ(subject){
        return String(subject || "").toLowerCase().includes("faq");
      }

      function renderCards(){
        if(!state.data) return;

        const q = state.q.trim().toLowerCase();
        const items = getItems().filter(it => {
          if(!q) return true;
          const blob = (it.title + " " + it.subtopic + " " + it.message_short + " " + it.message_long).toLowerCase();
          return blob.includes(q);
        });

        if(!items.length){
          elCards.innerHTML = "<p class=\"note\">No matches.</p>";
          return;
        }

        elCards.innerHTML = items.map(it => {
          const title = it.title || it.subtopic || "Item";
          const sub = it.subtopic ? "<span class=\"chip\">" + esc(it.subtopic) + "</span>" : "";
          const upd = it.last_updated ? "<span class=\"chip\">" + esc(it.last_updated) + "</span>" : "";

          const shortTxt = (it.message_short || "").trim();
          const longTxt = (it.message_long || "").trim();
          const src = (it.source_url || "").trim();
          const srcAbs = absUrl(src);
          const isImg = /\.(png|jpg|jpeg|webp)$/i.test(srcAbs);

          const faqMode = isFAQ(state.subject);

          const blocks = [];

          if(isImg){
            blocks.push(
              "<div class=\"imgBlock\" aria-label=\"Image\">" +
                "<div class=\"textBlockTop\">" +
                  "<p class=\"textLabel\">Image</p>" +
                  "<div class=\"imgActions\">" +
                    "<button class=\"copyBtn\" data-copy=\"" + esc(srcAbs) + "\">Copy image link</button>" +
                    "<a class=\"copyBtn\" href=\"" + esc(srcAbs) + "\" target=\"_blank\" rel=\"noopener\">Open</a>" +
                  "</div>" +
                "</div>" +
                "<a class=\"imgPreview\" href=\"" + esc(srcAbs) + "\" target=\"_blank\" rel=\"noopener\">" +
                  "<img src=\"" + esc(srcAbs) + "\" alt=\"" + esc(title) + "\" loading=\"lazy\" decoding=\"async\" />" +
                "</a>" +
              "</div>"
            );
          }else if(srcAbs){
            blocks.push(
              "<div class=\"textBlock\" aria-label=\"Source link\">" +
                "<div class=\"textBlockTop\">" +
                  "<p class=\"textLabel\">Link</p>" +
                  "<button class=\"copyBtn\" data-copy=\"" + esc(srcAbs) + "\">Copy</button>" +
                "</div>" +
                "<p class=\"textBody\">" + esc(srcAbs) + "</p>" +
              "</div>"
            );
          }

          if(faqMode){
            if(longTxt){
              blocks.push(
                "<div class=\"textBlock\" aria-label=\"Answer\">" +
                  "<div class=\"textBlockTop\">" +
                    "<p class=\"textLabel\">Answer</p>" +
                    "<button class=\"copyBtn\" data-copy=\"" + esc(longTxt) + "\">Copy</button>" +
                  "</div>" +
                  "<p class=\"textBody\">" + esc(longTxt) + "</p>" +
                "</div>"
              );
            }else if(shortTxt){
              blocks.push(
                "<div class=\"textBlock\" aria-label=\"Answer\">" +
                  "<div class=\"textBlockTop\">" +
                    "<p class=\"textLabel\">Answer</p>" +
                    "<button class=\"copyBtn\" data-copy=\"" + esc(shortTxt) + "\">Copy</button>" +
                  "</div>" +
                  "<p class=\"textBody\">" + esc(shortTxt) + "</p>" +
                "</div>"
              );
            }
          }else{
            if(shortTxt){
              blocks.push(
                "<div class=\"textBlock\" aria-label=\"Short message\">" +
                  "<div class=\"textBlockTop\">" +
                    "<p class=\"textLabel\">Message short</p>" +
                    "<button class=\"copyBtn\" data-copy=\"" + esc(shortTxt) + "\">Copy</button>" +
                  "</div>" +
                  "<p class=\"textBody\">" + esc(shortTxt) + "</p>" +
                "</div>"
              );
            }
            if(longTxt){
              blocks.push(
                "<div class=\"textBlock\" aria-label=\"Long message\">" +
                  "<div class=\"textBlockTop\">" +
                    "<p class=\"textLabel\">Message long</p>" +
                    "<button class=\"copyBtn\" data-copy=\"" + esc(longTxt) + "\">Copy</button>" +
                  "</div>" +
                  "<p class=\"textBody\">" + esc(longTxt) + "</p>" +
                "</div>"
              );
            }
          }

          return (
            "<article class=\"cardItem\" aria-label=\"" + esc(title) + "\">" +
              "<div class=\"cardTop\">" +
                "<div class=\"cardTitleWrap\">" +
                  "<p class=\"cardTitle\">" + esc(title) + "</p>" +
                  "<div class=\"cardMeta\">" + sub + upd + "</div>" +
                "</div>" +
              "</div>" +
              "<div class=\"cardBody\">" + blocks.join("") + "</div>" +
            "</article>"
          );
        }).join("");

        // bind copy buttons
        elCards.querySelectorAll("[data-copy]").forEach(btn => {
          btn.addEventListener("click", () => copyText(btn.getAttribute("data-copy")));
        });
      }

      function renderSocial(){
        const langObj = state.data.languages[state.lang] || {};
        const subj = langObj["Social"] || langObj["Social Links"] || null;
        let items = [];
        if(subj){
          const firstTopic = Object.keys(subj)[0];
          items = subj[firstTopic] || [];
        }else{
          // fallback: try any subject that looks like social
          const sKey = Object.keys(langObj).find(k => k.toLowerCase().includes("social"));
          if(sKey){
            const topObj = langObj[sKey] || {};
            const tKey = Object.keys(topObj)[0];
            items = (topObj[tKey] || []);
          }
        }

        const normalize = (t) => String(t || "").toLowerCase();
        const iconFor = (title) => {
          const s = normalize(title);
          if(s.includes("instagram")) return ICONS.instagram;
          if(s.includes("tiktok")) return ICONS.tiktok;
          if(s.includes("facebook")) return ICONS.facebook;
          if(s.includes("youtube")) return ICONS.youtube;
          if(s.includes("shop") || s.includes("tienda")) return ICONS.shop;
          if(s.includes("review") || s.includes("resena") || s.includes("google")) return ICONS.review;
          return ICONS.instagram;
        };

        elSocialGrid.innerHTML = items.map(it => {
          const name = it.title || it.subtopic || "Link";
          const url = absUrl(it.source_url || it.message_short || it.message_long || "");
          return (
            "<div class=\"socialItem\">" +
              "<div class=\"socialLeft\">" +
                "<span class=\"ico\" style=\"background-image:url('" + esc(iconFor(name)) + "')\"></span>" +
                "<span class=\"socialName\">" + esc(name) + "</span>" +
              "</div>" +
              "<button class=\"copyBtn\" data-copy=\"" + esc(url) + "\">Copy</button>" +
            "</div>"
          );
        }).join("");

        elSocialGrid.querySelectorAll("[data-copy]").forEach(btn => {
          btn.addEventListener("click", () => copyText(btn.getAttribute("data-copy")));
        });
      }

      function onChange(){
        state.lang = elLang.value;
        state.subject = elSub.value;
        state.topic = elTopic.value;
        state.q = elQ.value || "";

        fillSubjects();
        fillTopics();
        refreshBookingButtons();
        renderCards();
        renderSocial();
      }

      async function load(){
        try{
          const res = await fetch("/info/staff-content.json", { cache: "no-store" });
          const json = await res.json();
          state.data = json;

          // defaults
          state.lang = elLang.value;

          fillSubjects();
          fillTopics();
          refreshBookingButtons();
          renderCards();
          renderSocial();

          elLang.addEventListener("change", () => {
            state.lang = elLang.value;
            fillSubjects();
            fillTopics();
            refreshBookingButtons();
            renderCards();
            renderSocial();
          });

          elSub.addEventListener("change", () => {
            state.subject = elSub.value;
            fillTopics();
            renderCards();
            renderSocial();
          });

          elTopic.addEventListener("change", () => {
            state.topic = elTopic.value;
            renderCards();
          });

          elQ.addEventListener("input", () => {
            state.q = elQ.value || "";
            renderCards();
          });

        }catch(_){
          elCards.innerHTML = "<p class=\"note\">Content unavailable. Make sure staff-content.json is deployed.</p>";
        }
      }

      load();
    })();
  </script>
</body>
</html>
