<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sobre nosotros | Mindo Bird Watching</title>

  <!-- Keep for staging while testing -->
  <meta name="robots" content="noindex, nofollow" />

  <!-- Hreflang (About Us EN <-> Sobre Nosotros ES) -->
  <link rel="alternate" hreflang="en" href="/about-us/" />
  <link rel="alternate" hreflang="es" href="/es/sobre-nosotros/" />
  <link rel="alternate" hreflang="x-default" href="/about-us/" />

  <link rel="stylesheet" href="/assets/css/site.css">
  <script src="/assets/js/head.js" defer></script>
  <script src="/assets/js/site.js" defer></script>

  <style>
    .page{
      margin-top:18px;
      padding:26px;
    }

    .page.card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
    }

    .copy{
      max-width: 82ch;
      margin-top: 8px;
    }

    .copy p{
      margin: 0 0 12px;
    }

    .grid{
      margin-top: 16px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }

    .mini{
      padding: 16px;
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
    }

    .mini h2{
      margin:0 0 6px;
      font-size: 16px;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
    }

    .mini p{ margin:0; }

    .ctaRow{
      margin-top: 16px;
      display:flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- Global header mount -->
    <div id="siteHeader"></div>

    <main class="page card">
      <h1>Sobre nosotros</h1>

      <div class="copy" aria-label="Sobre nosotros texto">
        <p>
          En Mindo Bird Watching, nos apasiona compartir la impresionante belleza del bosque nublado de Ecuador y su increíble avifauna.
          Con años de experiencia como guía de avistamiento de aves, me especializo en ayudar a los visitantes a descubrir el vibrante mundo de tucanes,
          colibríes, tangaras y muchas otras especies que habitan en Mindo.
        </p>
        <p>
          Nuestros tours están diseñados para ofrecer una experiencia única e inmersiva, ya sea que seas un observador de aves experimentado o un entusiasta
          de la naturaleza que visita por primera vez. Con una guía experta, atención personalizada y acceso a algunos de los mejores lugares para avistar aves
          en la región, garantizamos que cada momento sea inolvidable.
        </p>
        <p>
          Únete a nosotros para explorar las maravillas de Mindo y crear recuerdos rodeados por los cantos y colores de la naturaleza.
        </p>
      </div>

      <div class="grid" aria-label="Puntos clave">
        <div class="mini">
          <h2>Guía local</h2>
          <p>Años de experiencia guiando birders en el bosque nublado de Mindo.</p>
        </div>

        <div class="mini">
          <h2>Tours personalizados</h2>
          <p>Ideal tanto para birders expertos como para quienes visitan por primera vez.</p>
        </div>

        <div class="mini">
          <h2>Mejores rutas</h2>
          <p>Acceso a hábitats y puntos fuertes de observación en la zona.</p>
        </div>
      </div>

      <div class="ctaRow">
        <a class="btn primary" href="/book-tour/">Reservar un tour</a>
        <a class="btn secondary" href="/tours/">Ver tours</a>
      </div>
    </main>

    <!-- Global footer mount -->
    <div id="siteFooter"></div>
  </div>

  <script>
    (function(){

      async function mountIncludesOnce() {
        const headerMount = document.getElementById('siteHeader');
        const footerMount = document.getElementById('siteFooter');

        // Prevent double-injection if something else already mounted it
        if (headerMount && !headerMount.querySelector('header.topbar')) {
          const hRes = await fetch('/assets/includes/header.html', { cache: 'no-store' });
          headerMount.innerHTML = await hRes.text();
        }

        if (footerMount && !footerMount.querySelector('footer.footer')) {
          const fRes = await fetch('/assets/includes/footer.html', { cache: 'no-store' });
          footerMount.innerHTML = await fRes.text();
        }
      }

      function applySpanishHeaderUI() {
        // Option A: keep ONE global header include, localize it per page
        const header = document.querySelector('header.topbar');
        if (!header) return;

        // Update language switch links + active state
        const langLinks = header.querySelectorAll('.lang a[data-lang]');
        langLinks.forEach(a => a.classList.remove('active'));

        const enLink = header.querySelector('.lang a[data-lang="en"]');
        const esLink = header.querySelector('.lang a[data-lang="es"]');
        if (enLink) enLink.setAttribute('href', '/about-us/');
        if (esLink) {
          esLink.setAttribute('href', '/es/sobre-nosotros/');
          esLink.classList.add('active');
          esLink.setAttribute('aria-current', 'page');
        }
        if (enLink) {
          enLink.removeAttribute('aria-current');
        }

        // Map EN -> ES labels + ES routes
        const map = [
          { en: 'Home',        es: 'Inicio',         href: '/es/' },
          { en: 'About Us',    es: 'Sobre nosotros', href: '/es/sobre-nosotros/' },
          { en: 'Our Guide',   es: 'Nuestro guía',   href: '/es/nuestro-guia/' },
          { en: 'Tours',       es: 'Tours',          href: '/es/tours/' },
          { en: 'Bird Gallery',es: 'Galería',        href: '/es/galeria/' },
          { en: 'Book Tour',   es: 'Reservar',       href: '/es/reservar/' },
          { en: 'Contact',     es: 'Contacto',       href: '/es/contacto/' }
        ];

        // Update both desktop + mobile menus
        const allNavLinks = header.querySelectorAll('.nav a.pill, .menuList a.pill');

        allNavLinks.forEach(a => {
          const txt = (a.textContent || '').trim();

          const hit = map.find(x => x.en === txt);
          if (hit) {
            a.textContent = hit.es;
            a.setAttribute('href', hit.href);
          }

          // clear active state first
          a.classList.remove('active');
          a.removeAttribute('aria-current');
        });

        // Mark current page as active (Sobre nosotros)
        const currentHref = '/es/sobre-nosotros/';
        header.querySelectorAll(`.nav a.pill[href="${currentHref}"], .menuList a.pill[href="${currentHref}"]`)
          .forEach(a => {
            a.classList.add('active');
            a.setAttribute('aria-current', 'page');
          });
      }

      function bindHamburger() {
        const btn = document.querySelector('.menuBtn');
        const panel = document.getElementById('menuPanel');
        if (!btn || !panel) return;

        // Ensure closed on load
        panel.classList.remove('is-open');
        btn.setAttribute('aria-expanded', 'false');

        function closeMenu(){
          panel.classList.remove('is-open');
          btn.setAttribute('aria-expanded', 'false');
        }

        btn.addEventListener('click', function(){
          const open = panel.classList.toggle('is-open');
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });

        document.addEventListener('click', function(e){
          if(panel.classList.contains('is-open')){
            const inside = panel.contains(e.target) || btn.contains(e.target);
            if(!inside) closeMenu();
          }
        });

        document.addEventListener('keydown', function(e){
          if(e.key === 'Escape') closeMenu();
        });
      }

      (async function init(){
        await mountIncludesOnce();
        applySpanishHeaderUI();
        bindHamburger();
      })();

    })();
  </script>
</body>
</html>
