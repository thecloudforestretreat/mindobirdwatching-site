<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galería | Mindo Bird Watching</title>
  <meta name="description" content="Explora la galería de Mindo Bird Watching con aves coloridas de Ecuador. Fotos de colibríes, tucanes, tángaras y el Gallo de la Peña del bosque nublado de Mindo." />

  <link rel="alternate" hreflang="en" href="/bird-gallery/" />
  <link rel="alternate" hreflang="es" href="/es/galeria/" />
  <link rel="alternate" hreflang="x-default" href="/bird-gallery/" />

  <link rel="stylesheet" href="/assets/css/site.css" />
  <script src="/assets/js/head.js" defer></script>
  <script src="/assets/js/site.js" defer></script>

  <style>
    /* =========================
       Estilos solo de esta página (contenido principal)
       ========================= */
    .page { margin-top: 18px; padding: 26px; }
    .page.card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
    }

    .hero{
      display: grid;
      grid-template-columns: 1.15fr 0.85fr;
      gap: 16px;
      align-items: start;
    }

    .hero h1{ margin: 0 0 6px; letter-spacing: -0.02em; }

    .hero p{
      margin: 0;
      color: var(--ink);
      line-height: 1.6;
      max-width: 82ch;
    }

    .heroCard{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    .heroCard h2{
      margin: 0 0 8px;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
      font-size: 18px;
    }

    .heroCard ul{
      margin: 0;
      padding-left: 18px;
      line-height: 1.55;
      color: var(--ink);
    }

    .heroCtas{
      margin-top: 12px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .section{
      margin-top: 18px;
      padding-top: 14px;
      border-top: 1px solid var(--line);
    }

    .sectionHead{
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .sectionHead h2{
      margin: 0;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
      font-size: 20px;
    }

    .hint{ margin: 0; color: var(--muted); font-size: 13px; }

    .filters{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin: 10px 0 14px;
    }

    .chip{
      appearance: none;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.65);
      color: var(--ink);
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 900;
      font-size: 13px;
      line-height: 1;
      cursor: pointer;
      box-shadow: var(--shadow);
    }
    .chip[aria-pressed="true"]{
      background: rgba(13,89,37,.14);
      border-color: rgba(13,89,37,.35);
    }

    .gallery{
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }

    .tile{
      border: 1px solid var(--line);
      border-radius: var(--r);
      overflow: hidden;
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      cursor: pointer;
      position: relative;
      min-height: 160px;
    }

    .thumb{
      width: 100%;
      height: 220px;
      display: block;
      object-fit: cover;
      background: rgba(255,255,255,.55);
    }

    .meta{
      padding: 10px 12px;
      border-top: 1px solid var(--line);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: baseline;
      background: rgba(255,255,255,.55);
    }

    .name{
      margin: 0;
      font-weight: 900;
      font-size: 13.5px;
      color: var(--ink);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .tag{
      margin: 0;
      font-size: 12.5px;
      color: var(--muted);
      white-space: nowrap;
    }

    .emptyState{
      display: none;
      margin-top: 10px;
      padding: 14px;
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      color: var(--muted);
    }
    .emptyState.is-visible{ display: block; }

    .videoGrid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .videoCard{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .videoFrame{
      aspect-ratio: 16 / 9;
      width: 100%;
      border: 0;
      display: block;
      background: rgba(255,255,255,.55);
    }

    .videoCap{
      padding: 10px 12px;
      border-top: 1px solid var(--line);
      color: var(--muted);
      font-size: 13px;
      background: rgba(255,255,255,.55);
    }

    .lb{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.62);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 18px;
    }
    .lb.is-open{ display: flex; }

    .lbDialog{
      width: min(980px, 100%);
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.92);
      box-shadow: 0 30px 80px rgba(0,0,0,.35);
      overflow: hidden;
    }

    .lbMedia{ position: relative; background: rgba(255,255,255,.55); }

    .lbImg{
      width: 100%;
      height: min(70vh, 640px);
      object-fit: contain;
      display: block;
      background: rgba(255,255,255,.55);
    }

    .lbBar{
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-top: 1px solid var(--line);
      background: rgba(255,255,255,.82);
    }

    .lbTitle{
      margin: 0;
      font-weight: 900;
      color: var(--ink);
      font-size: 14px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .lbSub{
      margin: 0;
      color: var(--muted);
      font-size: 12.5px;
      white-space: nowrap;
    }

    .lbBtns{
      display: inline-flex;
      gap: 8px;
      align-items: center;
      flex: 0 0 auto;
    }

    .iconBtn{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.85);
      box-shadow: var(--shadow);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
    }
    .iconBtn:focus{ outline: 2px solid rgba(13,89,37,.35); outline-offset: 2px; }
    .iconBtn svg{ width: 20px; height: 20px; }

    .closeBtn{
      width: auto;
      padding: 0 12px;
      gap: 10px;
      font-weight: 900;
      font-size: 13px;
    }

    @media (max-width: 980px){
      .gallery{ grid-template-columns: repeat(3, 1fr); }
      .thumb{ height: 200px; }
    }

    @media (max-width: 900px){
      .hero{ grid-template-columns: 1fr; }
      .gallery{ grid-template-columns: repeat(2, 1fr); }
      .thumb{ height: 190px; }
      .videoGrid{ grid-template-columns: 1fr; }
    }

    @media (max-width: 520px){
      .gallery{ grid-template-columns: 1fr; }
      .thumb{ height: 220px; }
      .lbImg{ height: min(65vh, 560px); }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Shared header mount -->
    <div id="siteHeader"></div>

    <main class="page card">
      <section class="hero" aria-label="Introducción a la galería">
        <div>
          <h1>Galería</h1>
          <p>
            Explora la galería de Mindo Bird Watching con aves coloridas de Ecuador. Mira fotos de colibríes,
            tucanes, tángaras y el Gallo de la Peña del bosque nublado de Mindo.
          </p>

          <div class="heroCtas" aria-label="Acciones principales">
            <a class="btn primary" href="/es/reservar/">Reservar un tour</a>
            <a class="btn secondary" href="/es/tours/">Ver tours</a>
          </div>
        </div>

        <aside class="heroCard" aria-label="Cómo usar esta galería">
          <h2>Conoce las aves</h2>
          <ul>
            <li>Usa los filtros para ver grupos (colibríes, tucanes, etc.)</li>
            <li>Haz clic en una foto para abrir el visor</li>
            <li>Usa las teclas izquierda y derecha para navegar</li>
          </ul>
        </aside>
      </section>

      <section class="section" aria-label="Sección de galería">
        <div class="sectionHead">
          <h2>Fotos</h2>
          <p class="hint">Listo con placeholders. Solo cambia URLs, títulos y categorías.</p>
        </div>

        <div class="filters" role="toolbar" aria-label="Filtros de galería">
          <button class="chip" type="button" data-filter="all" aria-pressed="true">Todo</button>
          <button class="chip" type="button" data-filter="hummingbirds" aria-pressed="false">Colibríes</button>
          <button class="chip" type="button" data-filter="toucans" aria-pressed="false">Tucanes</button>
          <button class="chip" type="button" data-filter="tanagers" aria-pressed="false">Tángaras</button>
          <button class="chip" type="button" data-filter="cock-of-the-rock" aria-pressed="false">Gallo de la Peña</button>
          <button class="chip" type="button" data-filter="other" aria-pressed="false">Otras</button>
          <button class="chip" type="button" data-filter="videos" aria-pressed="false">Videos</button>
        </div>

        <div id="galleryGrid" class="gallery" aria-label="Cuadrícula de fotos"></div>
        <div id="emptyState" class="emptyState" role="status" aria-live="polite">
          Aún no hay elementos para este filtro.
        </div>
      </section>

      <section class="section" aria-label="Sección de videos">
        <div class="sectionHead">
          <h2>Videos</h2>
          <p class="hint">Reemplaza los IDs de YouTube cuando estén listos.</p>
        </div>

        <div class="videoGrid">
          <div class="videoCard" aria-label="Video 1">
            <iframe
              class="videoFrame"
              src="https://www.youtube-nocookie.com/embed/VIDEO_ID_1"
              title="Video 1 de Mindo Bird Watching"
              loading="lazy"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
            <div class="videoCap">Video placeholder 1. Reemplaza <strong>VIDEO_ID_1</strong>.</div>
          </div>

          <div class="videoCard" aria-label="Video 2">
            <iframe
              class="videoFrame"
              src="https://www.youtube-nocookie.com/embed/VIDEO_ID_2"
              title="Video 2 de Mindo Bird Watching"
              loading="lazy"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
            <div class="videoCap">Video placeholder 2. Reemplaza <strong>VIDEO_ID_2</strong>.</div>
          </div>
        </div>
      </section>
    </main>

    <!-- Shared footer mount -->
    <div id="siteFooter"></div>
  </div>

  <!-- Lógica solo de la galería (sin lógica de menú) -->
  <script>
    (function () {
      "use strict";

      if (document.documentElement.dataset.mbwGaleriaInit === "1") return;
      document.documentElement.dataset.mbwGaleriaInit = "1";

      const grid = document.getElementById("galleryGrid");
      const emptyState = document.getElementById("emptyState");
      const chips = Array.from(document.querySelectorAll(".chip[data-filter]"));
      if (!grid) return;

      function svgPlaceholder(label) {
        const bg = "F3F7F1";
        const stroke = "D6E5C6";
        const text = "0D5925";
        const safe = String(label || "Placeholder").replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
        const svg =
          `<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="1600" viewBox="0 0 1200 1600">` +
            `<rect width="1200" height="1600" fill="#${bg}"/>` +
            `<rect x="60" y="60" width="1080" height="1480" rx="44" fill="none" stroke="#${stroke}" stroke-width="10"/>` +
            `<g font-family="Arial, Helvetica, sans-serif" text-anchor="middle">` +
              `<text x="600" y="760" font-size="54" font-weight="700" fill="#${text}">${safe}</text>` +
              `<text x="600" y="840" font-size="28" font-weight="600" fill="#6B7C6C">Reemplaza src, título y categoría</text>` +
            `</g>` +
          `</svg>`;
        return "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(svg);
      }

      // Edita solo estos campos: title, category, src, alt
      // category:
      // "hummingbirds" | "toucans" | "tanagers" | "cock-of-the-rock" | "other"
      const ITEMS = [
        { id: "img-01", type: "image", category: "hummingbirds", title: "Colibrí 01", src: svgPlaceholder("Colibrí 01"), alt: "Foto placeholder colibrí 01" },
        { id: "img-02", type: "image", category: "hummingbirds", title: "Colibrí 02", src: svgPlaceholder("Colibrí 02"), alt: "Foto placeholder colibrí 02" },
        { id: "img-03", type: "image", category: "hummingbirds", title: "Colibrí 03", src: svgPlaceholder("Colibrí 03"), alt: "Foto placeholder colibrí 03" },
        { id: "img-04", type: "image", category: "hummingbirds", title: "Colibrí 04", src: svgPlaceholder("Colibrí 04"), alt: "Foto placeholder colibrí 04" },
        { id: "img-05", type: "image", category: "hummingbirds", title: "Colibrí 05", src: svgPlaceholder("Colibrí 05"), alt: "Foto placeholder colibrí 05" },

        { id: "img-06", type: "image", category: "toucans", title: "Tucán 01", src: svgPlaceholder("Tucán 01"), alt: "Foto placeholder tucán 01" },
        { id: "img-07", type: "image", category: "toucans", title: "Tucán 02", src: svgPlaceholder("Tucán 02"), alt: "Foto placeholder tucán 02" },
        { id: "img-08", type: "image", category: "toucans", title: "Tucán 03", src: svgPlaceholder("Tucán 03"), alt: "Foto placeholder tucán 03" },
        { id: "img-09", type: "image", category: "toucans", title: "Tucán 04", src: svgPlaceholder("Tucán 04"), alt: "Foto placeholder tucán 04" },
        { id: "img-10", type: "image", category: "toucans", title: "Tucán 05", src: svgPlaceholder("Tucán 05"), alt: "Foto placeholder tucán 05" },

        { id: "img-11", type: "image", category: "tanagers", title: "Tángara 01", src: svgPlaceholder("Tángara 01"), alt: "Foto placeholder tángara 01" },
        { id: "img-12", type: "image", category: "tanagers", title: "Tángara 02", src: svgPlaceholder("Tángara 02"), alt: "Foto placeholder tángara 02" },
        { id: "img-13", type: "image", category: "tanagers", title: "Tángara 03", src: svgPlaceholder("Tángara 03"), alt: "Foto placeholder tángara 03" },
        { id: "img-14", type: "image", category: "tanagers", title: "Tángara 04", src: svgPlaceholder("Tángara 04"), alt: "Foto placeholder tángara 04" },
        { id: "img-15", type: "image", category: "tanagers", title: "Tángara 05", src: svgPlaceholder("Tángara 05"), alt: "Foto placeholder tángara 05" },

        { id: "img-16", type: "image", category: "cock-of-the-rock", title: "Gallo de la Peña 01", src: svgPlaceholder("Gallo de la Peña 01"), alt: "Foto placeholder gallo de la peña 01" },
        { id: "img-17", type: "image", category: "cock-of-the-rock", title: "Gallo de la Peña 02", src: svgPlaceholder("Gallo de la Peña 02"), alt: "Foto placeholder gallo de la peña 02" },
        { id: "img-18", type: "image", category: "cock-of-the-rock", title: "Gallo de la Peña 03", src: svgPlaceholder("Gallo de la Peña 03"), alt: "Foto placeholder gallo de la peña 03" },
        { id: "img-19", type: "image", category: "cock-of-the-rock", title: "Gallo de la Peña 04", src: svgPlaceholder("Gallo de la Peña 04"), alt: "Foto placeholder gallo de la peña 04" },
        { id: "img-20", type: "image", category: "cock-of-the-rock", title: "Gallo de la Peña 05", src: svgPlaceholder("Gallo de la Peña 05"), alt: "Foto placeholder gallo de la peña 05" },

        { id: "img-21", type: "image", category: "other", title: "Ave 21", src: svgPlaceholder("Ave 21"), alt: "Foto placeholder ave 21" },
        { id: "img-22", type: "image", category: "other", title: "Ave 22", src: svgPlaceholder("Ave 22"), alt: "Foto placeholder ave 22" },
        { id: "img-23", type: "image", category: "other", title: "Ave 23", src: svgPlaceholder("Ave 23"), alt: "Foto placeholder ave 23" },
        { id: "img-24", type: "image", category: "other", title: "Ave 24", src: svgPlaceholder("Ave 24"), alt: "Foto placeholder ave 24" },
        { id: "img-25", type: "image", category: "other", title: "Ave 25", src: svgPlaceholder("Ave 25"), alt: "Foto placeholder ave 25" },
        { id: "img-26", type: "image", category: "other", title: "Ave 26", src: svgPlaceholder("Ave 26"), alt: "Foto placeholder ave 26" },
        { id: "img-27", type: "image", category: "other", title: "Ave 27", src: svgPlaceholder("Ave 27"), alt: "Foto placeholder ave 27" },
        { id: "img-28", type: "image", category: "other", title: "Ave 28", src: svgPlaceholder("Ave 28"), alt: "Foto placeholder ave 28" },
        { id: "img-29", type: "image", category: "other", title: "Ave 29", src: svgPlaceholder("Ave 29"), alt: "Foto placeholder ave 29" },
        { id: "img-30", type: "image", category: "other", title: "Ave 30", src: svgPlaceholder("Ave 30"), alt: "Foto placeholder ave 30" }
      ];

      const lb = document.createElement("div");
      lb.className = "lb";
      lb.setAttribute("role", "dialog");
      lb.setAttribute("aria-modal", "true");
      lb.setAttribute("aria-label", "Visor de imágenes");
      lb.innerHTML = `
        <div class="lbDialog" role="document">
          <div class="lbMedia">
            <img class="lbImg" alt="" />
          </div>
          <div class="lbBar">
            <div style="min-width:0;">
              <p class="lbTitle" style="min-width:0;"></p>
              <p class="lbSub"></p>
            </div>
            <div class="lbBtns">
              <button class="iconBtn" type="button" data-lb="prev" aria-label="Anterior (flecha izquierda)">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M15 18l-6-6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <button class="iconBtn" type="button" data-lb="next" aria-label="Siguiente (flecha derecha)">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M9 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <button class="iconBtn closeBtn" type="button" data-lb="close" aria-label="Cerrar (escape)">
                <span>Cerrar</span>
              </button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(lb);

      const lbImg = lb.querySelector(".lbImg");
      const lbTitle = lb.querySelector(".lbTitle");
      const lbSub = lb.querySelector(".lbSub");
      const btnPrev = lb.querySelector('[data-lb="prev"]');
      const btnNext = lb.querySelector('[data-lb="next"]');
      const btnClose = lb.querySelector('[data-lb="close"]');

      let activeFilter = "all";
      let visible = ITEMS.slice();
      let lbIndex = 0;
      let lastFocused = null;

      function prettyCategory(c) {
        const map = {
          "hummingbirds": "Colibríes",
          "toucans": "Tucanes",
          "tanagers": "Tángaras",
          "cock-of-the-rock": "Gallo de la Peña",
          "other": "Otras"
        };
        return map[c] || "Aves";
      }

      function setEmptyState() {
        if (!emptyState) return;
        emptyState.classList.toggle("is-visible", visible.length === 0);
      }

      function render() {
        const filtered =
          activeFilter === "all" ? ITEMS :
          activeFilter === "videos" ? [] :
          ITEMS.filter(x => x.category === activeFilter);

        visible = filtered;
        grid.innerHTML = "";

        visible.forEach((item, i) => {
          const tile = document.createElement("button");
          tile.type = "button";
          tile.className = "tile";
          tile.setAttribute("aria-label", `Abrir ${item.title}`);
          tile.dataset.index = String(i);

          const img = document.createElement("img");
          img.className = "thumb";
          img.src = item.src;
          img.alt = item.alt || item.title;

          const meta = document.createElement("div");
          meta.className = "meta";

          const name = document.createElement("p");
          name.className = "name";
          name.textContent = item.title;

          const tag = document.createElement("p");
          tag.className = "tag";
          tag.textContent = prettyCategory(item.category);

          meta.appendChild(name);
          meta.appendChild(tag);

          tile.appendChild(img);
          tile.appendChild(meta);

          tile.addEventListener("click", () => openLightbox(i));
          grid.appendChild(tile);
        });

        setEmptyState();
      }

      function clamp(i) {
        const n = visible.length || 1;
        return (i % n + n) % n;
      }

      function openLightbox(i) {
        if (!visible.length) return;
        lastFocused = document.activeElement;

        lbIndex = clamp(i);
        const item = visible[lbIndex];

        lbImg.src = item.src;
        lbImg.alt = item.alt || item.title;
        lbTitle.textContent = item.title || "Foto";
        lbSub.textContent = prettyCategory(item.category);

        lb.classList.add("is-open");
        window.setTimeout(() => { if (btnClose) btnClose.focus(); }, 0);
      }

      function closeLightbox() {
        lb.classList.remove("is-open");
        if (lastFocused && typeof lastFocused.focus === "function") lastFocused.focus();
      }

      function showNext(dir) {
        if (!visible.length) return;
        lbIndex = clamp(lbIndex + dir);
        const item = visible[lbIndex];
        lbImg.src = item.src;
        lbImg.alt = item.alt || item.title;
        lbTitle.textContent = item.title || "Foto";
        lbSub.textContent = prettyCategory(item.category);
      }

      if (!lb.dataset.bound) {
        lb.dataset.bound = "1";
        if (btnPrev) btnPrev.addEventListener("click", () => showNext(-1));
        if (btnNext) btnNext.addEventListener("click", () => showNext(1));
        if (btnClose) btnClose.addEventListener("click", closeLightbox);

        lb.addEventListener("click", (e) => { if (e.target === lb) closeLightbox(); });

        document.addEventListener("keydown", (e) => {
          if (!lb.classList.contains("is-open")) return;
          if (e.key === "Escape") closeLightbox();
          if (e.key === "ArrowLeft") showNext(-1);
          if (e.key === "ArrowRight") showNext(1);
        });
      }

      if (!document.documentElement.dataset.mbwGaleriaFiltersBound) {
        document.documentElement.dataset.mbwGaleriaFiltersBound = "1";
        chips.forEach((btn) => {
          btn.addEventListener("click", () => {
            chips.forEach(b => b.setAttribute("aria-pressed", "false"));
            btn.setAttribute("aria-pressed", "true");
            activeFilter = btn.dataset.filter || "all";

            if (activeFilter === "videos") {
              render();
              const videosSection = document.querySelector('section[aria-label="Sección de videos"]');
              if (videosSection) videosSection.scrollIntoView({ behavior: "smooth", block: "start" });
              return;
            }

            render();
          });
        });
      }

      render();
    })();
  </script>
</body>
</html>
