<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Planifica tu viaje a Mindo | Mindo Bird Watching</title>
  <meta name="description" content="Planifica tu viaje a Mindo con un flujo simple y paso a paso. Elige la duracion, decide que reservar primero y genera sugerencias centradas en birding para copiar o enviar por email." />
  <link rel="canonical" href="https://mindobirdwatching.com/es/planifica-tu-viaje/mindo/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Mindo Bird Watching" />
  <meta property="og:title" content="Planifica tu viaje a Mindo | Mindo Bird Watching" />
  <meta property="og:description" content="Planifica tu viaje a Mindo con un flujo simple y paso a paso. Elige la duracion, decide que reservar primero y crea un plan centrado en birding para copiar o enviar por email." />
  <meta property="og:url" content="https://mindobirdwatching.com/es/planifica-tu-viaje/mindo/" />
  <meta property="og:image" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.png" />
  <meta property="og:image:secure_url" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Planifica tu viaje a Mindo con una guia simple y paso a paso" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Planifica tu viaje a Mindo | Mindo Bird Watching" />
  <meta name="twitter:description" content="Planifica tu viaje a Mindo con un flujo simple y paso a paso. Elige la duracion, decide que reservar primero y crea un plan centrado en birding para copiar o enviar por email." />
  <meta name="twitter:image" content="https://mindobirdwatching.com/MBW-Assets-OG-Image.png" />
  <link rel="alternate" hreflang="en" href="/plan-your-trip/mindo/" />
  <link rel="alternate" hreflang="es" href="/es/planifica-tu-viaje/mindo/" />
  <link rel="alternate" hreflang="x-default" href="/plan-your-trip/mindo/" />
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#0D5925">
  <link rel="stylesheet" href="/assets/css/site.css">
  <link rel="stylesheet" href="/assets/css/header.css?v=1">
  <script src="/assets/js/head.js" defer></script>
  <style>
    /* Page-only styles (ASCII only) */
:root{
  --mbw-green: #0D5925;
  --mbw-ink: #111111;
  --mbw-green-bg: rgba(13,89,37,0.14);
  --mbw-green-border: rgba(13,89,37,0.32);
  --btn-secondary-bg: rgba(255,221,0,0.22);
  --btn-secondary-border: rgba(255,221,0,0.55);
  --btn-secondary-text: #111111;
  --btn-secondary-bg-hover: rgba(255,221,0,0.30);
}

.page{
  margin-top:18px;
  padding:26px;
}
.page.card{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
}

/* Button styling: match Tours page secondary shade for the "yellow" buttons */
.page .btn{
  border-radius: 14px;
  font-weight: 900;
}

/* Keep green secondary as you wanted */
.page .btn.secondary{
  background: var(--mbw-green-bg);
  border: 1px solid var(--mbw-green-border);
  color: var(--mbw-ink);
}
.page .btn.secondary:hover{
  background: rgba(13,89,37,0.18);
}

/* Make primary + tertiary use the exact same shade as global .btn.secondary (Tours page) */
.page .btn.primary,
.page .btn.tertiary{
  background: var(--btn-secondary-bg);
  border: 1px solid var(--btn-secondary-border);
  color: var(--btn-secondary-text);
}
.page .btn.primary:hover,
.page .btn.tertiary:hover{
  background: var(--btn-secondary-bg-hover);
}

.crumbs{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
  color: var(--muted);
  font-size: 13px;
  margin-bottom: 10px;
}
.crumbs a{
  color: var(--ink);
  font-weight: 900;
  text-decoration: none;
  border-bottom: 1px solid rgba(0,0,0,0.14);
}
.crumbs a:hover{ border-bottom-color: rgba(0,0,0,0.30); }

.hero{
  display:grid;
  grid-template-columns: 1.2fr 0.8fr;
  gap: 16px;
  align-items:stretch;
  margin-top: 10px;
}
@media (max-width: 900px){
  .hero{ grid-template-columns: 1fr; }
}

.heroMain{
  background: rgba(255,255,255,.65);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 18px;
  min-width:0;
}

.heroTitle{
  margin: 0 0 8px;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 28px;
  line-height: 1.15;
}

.heroLede{
  margin: 0;
  color: var(--muted);
  line-height: 1.65;
  max-width: 85ch;
}

.quickFacts{
  background: rgba(255,255,255,.65);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 16px;
  min-width:0;
  display:flex;
  flex-direction:column;
  gap: 10px;
}

.factsTitle{
  margin: 0 0 6px;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 18px;
}

.factGrid{
  display:grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

.fact{
  border: 1px solid var(--line);
  background: rgba(255,255,255,.72);
  border-radius: 14px;
  padding: 12px;
}
.fact strong{
  display:block;
  color: var(--ink);
  font-weight: 900;
  margin-bottom: 4px;
}
.fact span{
  color: var(--muted);
  line-height: 1.5;
  font-size: 13.5px;
  display:block;
}

.ctaRow{
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  margin-top: 14px;
  align-items:center;
}

.section{
  margin-top: 18px;
}

.sectionTitle{
  margin: 0 0 10px;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 20px;
}

.stepGrid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  align-items:stretch;
}
@media (max-width: 900px){
  .stepGrid{ grid-template-columns: 1fr; }
}

.stepCard{
  background: rgba(255,255,255,.65);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 16px;
  display:flex;
  flex-direction:column;
  gap: 10px;
  min-width:0;
}

.stepTop{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap: 10px;
  flex-wrap:wrap;
}

.stepTitle{
  margin:0;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 18px;
  line-height: 1.2;
}

.badge{
  display:inline-flex;
  align-items:center;
  gap: 6px;
  padding: 7px 10px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.75);
  font-weight: 900;
  font-size: 12px;
  color: var(--ink);
  white-space:nowrap;
}

.stepDesc{
  margin:0;
  color: var(--muted);
  line-height: 1.6;
}

.miniList{
  margin: 0;
  padding-left: 18px;
  color: var(--muted);
  line-height: 1.55;
}
.miniList li{ margin: 4px 0; }

.stepActions{
  margin-top:auto;
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  align-items:center;
}

.divider{
  margin-top: 18px;
  border-top: 1px solid var(--line);
  padding-top: 18px;
}

.twoCol{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  align-items:stretch;
}
@media (max-width: 900px){
  .twoCol{ grid-template-columns: 1fr; }
}

.callout{
  background: rgba(255,255,255,.65);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 16px;
  min-width:0;
}

.callout h3{
  margin:0 0 8px;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 18px;
}
.callout p{
  margin: 0 0 10px;
  color: var(--muted);
  line-height: 1.6;
}

.softCard{
  border: 1px solid var(--line);
  background: rgba(255,255,255,.72);
  border-radius: 14px;
  padding: 12px;
  margin-top: 10px;
}

.softCard strong{
  display:block;
  color: var(--ink);
  font-weight: 900;
  margin-bottom: 4px;
}
.softCard span{
  color: var(--muted);
  line-height: 1.5;
  font-size: 13.5px;
  display:block;
}

.noteLine{
  margin-top: 10px;
  padding-top: 12px;
  border-top: 1px solid var(--line);
  color: var(--muted);
  font-size: 13px;
  line-height: 1.5;
}
.noteLine a{
  color: var(--ink);
  font-weight: 900;
  text-decoration: underline;
  text-underline-offset: 3px;
}

/* Trip builder */
.builder{
  background: rgba(255,255,255,.65);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 16px;
  min-width:0;
}
.builderTop{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap: 12px;
  flex-wrap:wrap;
  margin-bottom: 10px;
}
.builderTitle{
  margin:0;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 20px;
}
.builderLede{
  margin: 6px 0 0;
  color: var(--muted);
  line-height: 1.6;
  max-width: 90ch;
}
.builderGrid{
  display:grid;
  grid-template-columns: 0.85fr 1.15fr;
  gap: 14px;
  align-items:start;
  margin-top: 12px;
}
@media (max-width: 900px){
  .builderGrid{ grid-template-columns: 1fr; }
}

.field{
  display:flex;
  flex-direction:column;
  gap: 6px;
  margin-bottom: 10px;
}
.field label{
  font-size: 13px;
  font-weight: 900;
  color: var(--ink);
}
.field select,
.field input{
  font: inherit;
  padding: 11px 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.78);
  box-shadow: var(--shadow);
  color: var(--ink);
  outline: none;
}

.field.inlineSelect{
  align-items:flex-start;
}
.field.inlineSelect select{
  width: 120px;
  max-width: 100%;
}

.chips{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
  margin-top: 6px;
}
.chip{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  padding: 9px 12px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.75);
  box-shadow: var(--shadow);
  cursor:pointer;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.chip input{
  width: 16px;
  height: 16px;
  accent-color: var(--mbw-green);
}
.chip span{
  font-size: 13px;
  font-weight: 900;
  color: var(--ink);
  line-height: 1;
}
@media (max-width: 520px){
  .chips{ gap: 10px; }
  .chip{ padding: 10px 12px; }
}

.builderActions{
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
  align-items:center;
  margin-top: 10px;
}

.mutedSmall{
  color: var(--muted);
  font-size: 13px;
  line-height: 1.5;
}

.builderStatus{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.72);
  color: var(--muted);
  font-size: 13px;
  line-height: 1.5;
}

details.emailDetails{
  margin-top: 12px;
  border-top: 1px solid var(--line);
  padding-top: 12px;
}
details.emailDetails > summary{
  list-style: none;
  cursor: pointer;
  user-select: none;
  display:flex;
  align-items:center;
  gap: 10px;
  font-weight: 900;
  color: var(--ink);
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.75);
  box-shadow: var(--shadow);
  width: fit-content;
  max-width: 100%;
}
details.emailDetails > summary::-webkit-details-marker{ display:none; }
details.emailDetails[open] > summary{
  background: rgba(255,255,255,.82);
}

.inviteGrid{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 10px;
  margin-top: 10px;
}
@media (max-width: 900px){
  .inviteGrid{ grid-template-columns: 1fr; }
}

/* Itinerary display */
.itWrap{
  background: rgba(255,255,255,.65);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 16px;
}
.itHeader{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  flex-wrap:wrap;
  margin-bottom: 10px;
}
.itTitle{
  margin: 0;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 28px;
  line-height: 1.15;
}
.itNote{
  margin: 8px 0 0;
  color: var(--mbw-green);
  line-height: 1.6;
  max-width: 95ch;
  font-size: 14px;
}

.daysStack{
  display:flex;
  flex-direction:column;
  gap: 14px;
  margin-top: 12px;
}

.dayCard{
  background: rgba(255,255,255,.72);
  border: 1px solid var(--line);
  border-radius: 18px;
  padding: 14px;
  box-shadow: var(--shadow);
}

.dayTop{
  display:grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items:center;
  margin-bottom: 10px;
}
@media (max-width: 560px){
  .dayTop{ grid-template-columns: 1fr; }
}

.dayTitle{
  margin: 0;
  font-family: var(--font-head);
  color: var(--mbw-green);
  letter-spacing: -0.02em;
  font-size: 22px;
  line-height: 1.2;
}

/* "Suggested day plan" pill should be yellow like the yellow buttons */
.pillBtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid var(--btn-secondary-border);
  background: var(--btn-secondary-bg);
  color: var(--btn-secondary-text);
  font-weight: 900;
  text-decoration:none;
  white-space:nowrap;
}

.planCard{
  background: rgba(245,248,255,0.70);
  border: 1px solid rgba(31,45,99,0.16);
  border-radius: 16px;
  padding: 14px;
}

/* All generated itinerary text should be black (except section headings/subheading above) */
.planLabel{
  font-weight: 900;
  letter-spacing: 0.08em;
  color: var(--mbw-ink);
  font-size: 12px;
  margin: 0 0 8px;
}

.planTitle{
  margin: 0 0 8px;
  font-family: var(--font-head);
  color: var(--mbw-ink);
  font-size: 18px;
  line-height: 1.25;
  letter-spacing: -0.01em;
}

.planDesc{
  margin: 0 0 10px;
  color: var(--mbw-ink);
  line-height: 1.65;
}

.planMeta{
  margin: 0 0 10px;
  color: var(--mbw-ink);
  opacity: 1;
  font-weight: 800;
}

.planList{
  margin: 0;
  padding-left: 18px;
  color: var(--mbw-ink);
  line-height: 1.6;
}
.planList li{ margin: 5px 0; }
.planList li::marker{ color: var(--mbw-green); }

.itGlobalNotes{
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--line);
  color: var(--muted);
  line-height: 1.6;
  font-size: 14px;
}
.itGlobalNotes .gnTitle{
  font-weight: 900;
  color: var(--muted);
  margin: 0 0 6px;
}
.itGlobalNotes ul{
  margin: 0;
  padding-left: 18px;
}
.itGlobalNotes li{
  margin: 6px 0;
}

.itFooterHelp{
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--line);
  color: var(--muted);
  font-size: 13px;
  line-height: 1.5;
}
.itFooterHelp a{
  color: var(--ink);
  font-weight: 900;
  text-decoration: underline;
  text-underline-offset: 3px;
}

/* Hidden plain text output (for copy/email only) */
.srText{
  position:absolute;
  left:-9999px;
  top:auto;
  width:1px;
  height:1px;
  overflow:hidden;
}
      </style>
</head>
<body>
  <div class="container">
    <div id="siteHeader"></div>
    <main class="page card">
      <nav class="crumbs" aria-label="Breadcrumb">
        <a href="/es/">Inicio</a>
        <span aria-hidden="true">/</span>
        <a href="/es/planifica-tu-viaje/">Planifica tu viaje</a>
        <span aria-hidden="true">/</span>
        <span>Planifica tu viaje a Mindo</span>
      </nav>
  <section class="hero" aria-label="Planifica tu viaje a Mindo hero">
    <div class="heroMain">
      <h1 class="heroTitle">Planifica tu viaje a Mindo</h1>
      <p class="heroLede">
        Usa este flujo simple para decidir la duracion del viaje, que reservar primero y como crear un plan base centrado en birding con sugerencias opcionales segun tus intereses.
      </p>

      <div class="ctaRow" aria-label="Primary actions">
        <a class="btn primary" href="/es/tours/">Ver tours</a>
        <a class="btn secondary" href="/es/transporte/">Transporte</a>
        <a class="btn secondary" href="https://wa.me/13054585402" target="_blank" rel="noopener">Preguntar por WhatsApp</a>
      </div>

      <div class="noteLine">
        Tienes poco tiempo? Dinos tus fechas y objetivos y te recomendaremos un plan simple.
        <a href="https://wa.me/13054585402" target="_blank" rel="noopener">Escribenos</a>
      </div>
    </div>

    <aside class="quickFacts" aria-label="Quick facts">
      <h2 class="factsTitle">Datos rapidos</h2>
      <div class="factGrid">
        <div class="fact">
          <strong>Ideal para</strong>
          <span>Birding y observacion de aves primero, ademas de bosque nublado, cascadas, chocolate y dias de naturaleza facil desde Quito.</span>
        </div>
        <div class="fact">
          <strong>Como llegar</strong>
          <span>La mayoria de viajeros llega a Quito (UIO) y se traslada en conductor privado o van compartida.</span>
        </div>
        <div class="fact">
          <strong>Duracion</strong>
          <span>Funciona bien desde 1 dia (excursion) hasta 4 noches. La mayoria de birders prefiere 3 noches para equilibrar mananas y descanso.</span>
        </div>
      </div>
    </aside>
  </section>

  <section class="section" aria-label="Trip builder">
    <div class="builder" id="tripBuilder" data-endpoint="https://script.google.com/macros/s/AKfycbx_GZytHTBZpX4GBYYxUQY2nX2TvjuOgIdIRDM2TxVLPAZl1Oa8aV4T0kuPhKbf4oHfTw/exec">
      <div class="builderTop">
        <div>
          <h2 class="builderTitle">Arma un itinerario simple</h2>
          <p class="builderLede">
            Elige la duracion y tus intereses. Generaremos una estructura centrada en birding con sugerencias opcionales segun tus selecciones.
          </p>
        </div>
        <span class="badge" aria-label="Builder status badge">Borrador rapido</span>
      </div>

      <div class="builderGrid" aria-label="Trip builder form and output">
        <div aria-label="Builder controls">
          <div class="field inlineSelect">
            <label for="tripDays">Duracion (dias)</label>
            <select id="tripDays">
              <option value="1">1 dia</option>
              <option value="2">2 dias</option>
              <option value="3" selected>3 dias</option>
              <option value="4">4 dias</option>
              <option value="5">5 dias</option>
              <option value="6">6 dias</option>
              <option value="7">7 dias</option>
            </select>
          </div>

          <div class="field" aria-label="Interests">
            <label>Que te emociona mas?</label>
            <div class="chips" id="interestChips">
              <label class="chip"><input type="checkbox" value="birding" checked><span>Birding</span></label>
              <label class="chip"><input type="checkbox" value="hummingbirds"><span>Colibries</span></label>
              <label class="chip"><input type="checkbox" value="waterfalls"><span>Cascadas</span></label>
              <label class="chip"><input type="checkbox" value="chocolate"><span>Chocolate</span></label>
              <label class="chip"><input type="checkbox" value="coffee"><span>Cafe</span></label>
              <label class="chip"><input type="checkbox" value="photography"><span>Fotografia</span></label>
              <label class="chip"><input type="checkbox" value="adventure"><span>Aventura</span></label>
              <label class="chip"><input type="checkbox" value="relaxed"><span>Ritmo tranquilo</span></label>
              <label class="chip"><input type="checkbox" value="night"><span>Caminata nocturna</span></label>
            </div>
            <div class="mutedSmall" style="margin-top:8px;">
              Tip de birding: Las mananas temprano son las mejores. Mindo es famoso por colibries, tucanes y tangaras, ademas de muchas especies del bosque nublado.
            </div>
          </div>

          <div class="builderActions" aria-label="Builder actions">
            <button class="btn secondary" id="btnGenerate" type="button">Generar sugerencias</button>
            <button class="btn secondary" id="btnCopy" type="button">Copiar</button>
            <a class="btn primary" href="/es/reservar-tour/" id="btnBookTour">Reservar un tour</a>
          </div>

          <details class="emailDetails" id="emailDetails">
            <summary>Enviar itinerario por email</summary>

            <div class="field" style="margin-top:10px;">
              <label for="primaryEmail">Tu email</label>
              <input id="primaryEmail" type="email" placeholder="tu@email.com" autocomplete="email">
            </div>

            <div class="inviteGrid" aria-label="Invite up to 3 travelers">
              <div class="field">
                <label for="t1Email">Email del viajero 1</label>
                <input id="t1Email" type="email" placeholder="viajero1@email.com">
              </div>
              <div class="field">
                <label for="t2Email">Email del viajero 2</label>
                <input id="t2Email" type="email" placeholder="viajero2@email.com">
              </div>
              <div class="field">
                <label for="t3Email">Email del viajero 3</label>
                <input id="t3Email" type="email" placeholder="viajero3@email.com">
              </div>
            </div>

            <div class="builderActions" style="margin-top:12px;">
              <button class="btn secondary" id="btnSendEmail" type="button">Enviar email</button>
              <a class="btn primary" href="/es/tours/">Ver tours</a>
            </div>

            <div class="mutedSmall" style="margin-top:10px;">
              Enviaremos tu borrador e incluiremos hasta 3 viajeros adicionales.
            </div>
          </details>

          <div class="builderStatus" id="builderStatus" role="status" aria-live="polite">
            Cargando bloques de itinerario...
          </div>
        </div>

        <div aria-label="Itinerary output">
          <div class="itWrap" aria-label="Suggested itinerary">
            <div class="itHeader">
              <div>
                <h3 class="itTitle">Tu itinerario sugerido</h3>
                <p class="itNote" id="itNote">
                  Nota: Este es un itinerario sugerido generado a partir de tus selecciones. Los horarios y la logistica pueden variar por temporada, trafico y punto exacto de recogida.
                </p>
              </div>
            </div>

            <div class="daysStack" id="itineraryCards" aria-live="polite"></div>

            <div class="itGlobalNotes" id="itGlobalNotes" hidden>
              <div class="gnTitle">Nota:</div>
              <ul id="itGlobalNotesList"></ul>
            </div>

            <div class="itFooterHelp" id="itHelpLine">
              Quieres ayuda para ajustarlo a tu hotel y hora de llegada?
              <a href="https://wa.me/13054585402" target="_blank" rel="noopener">Escribenos por WhatsApp</a>
            </div>

            <textarea id="itineraryPlainText" class="srText" readonly aria-hidden="true"></textarea>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section" aria-label="Step by step planning">
    <h2 class="sectionTitle">Planificacion paso a paso</h2>

    <div class="stepGrid" aria-label="Planning steps">
      <article class="stepCard" aria-label="Step 1 trip length">
        <div class="stepTop">
          <h3 class="stepTitle">1) Elige la duracion del viaje</h3>
          <span class="badge">Empieza aqui</span>
        </div>
        <p class="stepDesc">
          Elige la duracion segun tu energia y cuantas mananas temprano quieres aprovechar.
        </p>
        <ul class="miniList" aria-label="Trip length options">
          <li><strong>1 dia:</strong> excursion enfocada con una manana fuerte y un extra opcional</li>
          <li><strong>2 noches:</strong> lo esencial y una manana fuerte de birding</li>
          <li><strong>3 noches:</strong> mejor balance para birding y tardes relajadas</li>
          <li><strong>4+ noches:</strong> ritmo lento para fotografia y especies objetivo</li>
        </ul>
        <div class="stepActions">
          <a class="btn primary" href="/es/tours/">Elegir un tour</a>
          <a class="btn secondary" href="/es/actividades/">Agregar actividades</a>
        </div>
      </article>

      <article class="stepCard" aria-label="Step 2 what to book first">
        <div class="stepTop">
          <h3 class="stepTitle">2) Reserva primero lo mas importante</h3>
          <span class="badge">Rapido y facil</span>
        </div>
        <p class="stepDesc">
          Asegura lo que afecta tus mananas. Lo demas puede quedar flexible.
        </p>
        <ul class="miniList" aria-label="Booking priority">
          <li>Mananas de birding guiadas (los mejores guias se reservan primero)</li>
          <li>Alojamiento cerca del punto de inicio</li>
          <li>Transporte alineado con tu hora de llegada</li>
        </ul>
        <div class="stepActions">
          <a class="btn primary" href="/es/tours/">Ver opciones de tours</a>
          <a class="btn secondary" href="/es/transporte/">Planificar traslados</a>
        </div>
      </article>

      <article class="stepCard" aria-label="Step 3 day by day outline">
        <div class="stepTop">
          <h3 class="stepTitle">3) Mantenlo simple: manana, mediodia, tarde, noche</h3>
          <span class="badge">Birding primero</span>
        </div>
        <p class="stepDesc">
          Mindo funciona mejor con birding temprano, mediodia relajado y una actividad opcional mas tarde.
        </p>
        <ul class="miniList" aria-label="Outline idea">
          <li>Manana: observacion de aves (guiado o por cuenta propia)</li>
          <li>Mediodia: descanso, almuerzo, pueblo o caminata corta</li>
          <li>Tarde: cascadas, fotografia o aventura segun tus elecciones</li>
          <li>Noche: caminata nocturna, chocolate o cafe, o cafes del pueblo</li>
        </ul>
        <div class="stepActions">
          <a class="btn primary" href="/es/actividades/">Armar tus dias</a>
          <a class="btn secondary" href="/es/tours/">Agregar manana guiada</a>
        </div>
      </article>

      <article class="stepCard" aria-label="Step 4 arrivals and transportation">
        <div class="stepTop">
          <h3 class="stepTitle">4) Ajusta tu llegada para aprovechar la primera manana</h3>
          <span class="badge">Sin estres</span>
        </div>
        <p class="stepDesc">
          Si quieres una primera manana fuerte, llega con tiempo para trasladarte con luz de dia.
        </p>
        <ul class="miniList" aria-label="Arrival tips">
          <li>Quito (UIO) suele ser la opcion mas rapida</li>
          <li>Planifica tu traslado para acomodarte antes de que oscurezca</li>
          <li>Dinos tu hora de vuelo y te recomendamos el mejor horario de recogida</li>
        </ul>
        <div class="stepActions">
          <a class="btn primary" href="/es/transporte/">Opciones de transporte</a>
          <a class="btn secondary" href="https://wa.me/13054585402" target="_blank" rel="noopener">Enviar detalles del vuelo</a>
        </div>
      </article>
    </div>
  </section>

  <section class="section divider" aria-label="Recommended plans">
    <h2 class="sectionTitle">Planes recomendados</h2>

    <div class="twoCol" aria-label="Sample plans">
      <div class="callout" aria-label="2 night plan">
        <h3>2 noches (lo esencial)</h3>
        <p>
          Ideal si quieres una manana fuerte de birding y una tarde de naturaleza relajada.
        </p>
        <div class="softCard">
          <strong>Ejemplo de plan</strong>
          <span>Dia 1: llegada y tarde facil en el pueblo. Dia 2: birding en la manana y cascadas opcionales. Dia 3: desayuno y traslado.</span>
        </div>
        <div class="ctaRow">
          <a class="btn primary" href="/es/tours/">Elegir un tour</a>
          <a class="btn secondary" href="/es/transporte/">Reservar recogida</a>
        </div>
      </div>

      <div class="callout" aria-label="3 to 4 night plan">
        <h3>3 a 4 noches (mejor balance)</h3>
        <p>
          Ideal para birders que quieren mas de una manana temprano y tiempo para fotografia con calma.
        </p>
        <div class="softCard">
          <strong>Ejemplo de plan</strong>
          <span>Mananas de birding, descansos al mediodia y una actividad opcional cada tarde segun tus intereses.</span>
        </div>
        <div class="ctaRow">
          <a class="btn primary" href="/es/tours/">Ver tours de birding</a>
          <a class="btn secondary" href="/es/actividades/">Agregar actividades</a>
        </div>
      </div>
    </div>

    <div class="noteLine">
      Quieres un plan personalizado? Escribenos tus fechas, hotel (si lo tienes) y objetivos.
      <a href="https://wa.me/13054585402" target="_blank" rel="noopener">Preguntar por WhatsApp</a>
    </div>
  </section>

  <section class="section divider" aria-label="More planning links">
    <h2 class="sectionTitle">Mas ayuda para planificar</h2>

    <div class="twoCol" aria-label="More links">
      <div class="callout">
        <h3>Vuelos y llegadas</h3>
        <p>Usa la pagina principal de Planifica tu viaje para revisar vuelos y coordinar tu traslado.</p>
        <div class="ctaRow">
          <a class="btn primary" href="/es/planifica-tu-viaje/">Abrir herramienta de vuelos</a>
          <a class="btn secondary" href="/es/transporte/">Transporte</a>
        </div>
      </div>

      <div class="callout">
        <h3>Planificacion centrada en birding</h3>
        <p>Si quieres un flujo solo de birding, usa la pagina de dias de birding y te ayudaremos a ordenar las mananas.</p>
        <div class="ctaRow">
          <a class="btn primary" href="/es/planifica-tu-viaje/mindo/">Planificar dias de birding</a>
          <a class="btn secondary" href="/es/tours/">Ver tours</a>
        </div>
      </div>
    </div>
  </section>
</main>

<div id="siteFooter"></div>
  </div>
  <script>
    (function(){
      const DATA_URL = "/assets/data/itinerary_blocks.json";

      const root = document.getElementById("tripBuilder");
      const statusEl = document.getElementById("builderStatus");
      const daysEl = document.getElementById("tripDays");
      const chipsEl = document.getElementById("interestChips");

      const btnGenerate = document.getElementById("btnGenerate");
      const btnCopy = document.getElementById("btnCopy");
      const btnSendEmail = document.getElementById("btnSendEmail");

      const emailDetails = document.getElementById("emailDetails");
      const primaryEmailEl = document.getElementById("primaryEmail");
      const t1EmailEl = document.getElementById("t1Email");
      const t2EmailEl = document.getElementById("t2Email");
      const t3EmailEl = document.getElementById("t3Email");

      const cardsEl = document.getElementById("itineraryCards");
      const plainEl = document.getElementById("itineraryPlainText");

      const globalNotesWrap = document.getElementById("itGlobalNotes");
      const globalNotesListEl = document.getElementById("itGlobalNotesList");

      let blocks = [];

      function setStatus(msg){
        statusEl.textContent = msg;
      }

      function getSelectedInterests(){
        const checked = Array.from(chipsEl.querySelectorAll("input[type='checkbox']:checked"));
        return checked.map(x => x.value);
      }

      function hasInterest(interests, key){
        return interests.indexOf(key) >= 0;
      }

      function filterByCategory(list, cat){
        const c = String(cat).toLowerCase();
        return list.filter(b => String(b.category || "").toLowerCase() === c);
      }

      function filterByTime(list, time){
        return list.filter(b => String(b.time_of_day || "") === time);
      }

      function hasTag(block, tag){
        const tags = (block.tags || []).map(String).map(s => s.toLowerCase());
        return tags.indexOf(String(tag || "").toLowerCase()) >= 0;
      }

      function pick(list, usedIds){
        for (let i = 0; i < list.length; i++){
          const b = list[i];
          const id = String(b.id || "");
          if (id && !usedIds.has(id)){
            usedIds.add(id);
            return b;
          }
        }
        return list[0] || null;
      }

      function safeText(s){
        return String(s || "").replace(/\s+/g, " ").trim();
      }

      function clearCards(){
        while(cardsEl.firstChild) cardsEl.removeChild(cardsEl.firstChild);
      }

      function clearGlobalNotes(){
        while(globalNotesListEl.firstChild) globalNotesListEl.removeChild(globalNotesListEl.firstChild);
        globalNotesWrap.hidden = true;
      }

      function renderGlobalNotes(notes){
        clearGlobalNotes();
        const clean = (notes || []).map(safeText).filter(Boolean);

        if (!clean.length) return;

        clean.forEach(function(n){
          const li = document.createElement("li");
          li.textContent = n;
          globalNotesListEl.appendChild(li);
        });

        globalNotesWrap.hidden = false;
      }

      function renderDayCard(dayIndex, regionLabel, planTitle, planDesc, metaText, bullets){
        const dayCard = document.createElement("div");
        dayCard.className = "dayCard";

        const dayTop = document.createElement("div");
        dayTop.className = "dayTop";

        const h = document.createElement("h4");
        h.className = "dayTitle";
        h.textContent = "Dia " + dayIndex + ": " + regionLabel;

        const pill = document.createElement("span");
        pill.className = "pillBtn";
        pill.textContent = "Plan sugerido del dia";

        dayTop.appendChild(h);
        dayTop.appendChild(pill);

        const planCard = document.createElement("div");
        planCard.className = "planCard";

        const label = document.createElement("div");
        label.className = "planLabel";
        label.textContent = "FLEXIBLE";

        const title = document.createElement("h5");
        title.className = "planTitle";
        title.textContent = planTitle;

        const desc = document.createElement("p");
        desc.className = "planDesc";
        desc.textContent = planDesc;

        const meta = document.createElement("p");
        meta.className = "planMeta";
        meta.textContent = metaText;

        const ul = document.createElement("ul");
        ul.className = "planList";
        (bullets || []).forEach(function(b){
          const li = document.createElement("li");
          li.textContent = b;
          ul.appendChild(li);
        });

        planCard.appendChild(label);
        planCard.appendChild(title);
        planCard.appendChild(desc);
        planCard.appendChild(meta);
        planCard.appendChild(ul);

        dayCard.appendChild(dayTop);
        dayCard.appendChild(planCard);

        cardsEl.appendChild(dayCard);
      }

      function buildPlainTextHeader(days, interests){
        const parts = [];

        parts.push("Sugerencias de viaje a Mindo (birding primero)");
        parts.push("");

        if (days === 1){
          parts.push("Plan de 1 dia: Mantenlo enfocado. Empieza temprano, un bloque principal de birding y un extra opcional.");
          parts.push("");
        }

        parts.push("Intereses seleccionados: " + (interests.length ? interests.join(", ") : "ninguno"));
        parts.push("");

        return parts;
      }

      function buildItinerary(){
        const days = parseInt(daysEl.value || "3", 10);
        const interests = getSelectedInterests();
        const used = new Set();

        const birdingWanted = hasInterest(interests, "birding");
        const hummingbirdsWanted = hasInterest(interests, "hummingbirds");
        const waterfallsWanted = hasInterest(interests, "waterfalls");
        const chocolateWanted = hasInterest(interests, "chocolate");
        const coffeeWanted = hasInterest(interests, "coffee");
        const nightWanted = hasInterest(interests, "night");
        const adventureWanted = hasInterest(interests, "adventure");
        const relaxedWanted = hasInterest(interests, "relaxed");
        const photoWanted = hasInterest(interests, "photography");

        const birdingBlocks = filterByCategory(blocks, "birding");
        const morningAny = filterByTime(blocks, "early_morning").concat(filterByTime(blocks, "morning"));
        const middayAny = filterByTime(blocks, "midday");

        const waterfallBlocks = blocks.filter(b => hasTag(b, "waterfalls"));
        const chocolateBlocks = blocks.filter(b => hasTag(b, "chocolate"));
        const coffeeBlocks = blocks.filter(b => hasTag(b, "coffee"));
        const adventureBlocks = blocks.filter(b => hasTag(b, "adventure"));
        const nightBlocks = blocks.filter(b => hasTag(b, "night") || String(b.category || "").toLowerCase() === "night");

        clearCards();
        clearGlobalNotes();

        const plain = buildPlainTextHeader(days, interests);

        for (let d = 1; d <= days; d++){
          let morningTitle = "Manana de observacion de aves con especies objetivo (birding primero)";
          if (birdingWanted && birdingBlocks.length){
            const guided = pick(birdingBlocks, used);
            if (guided && guided.title) morningTitle = guided.title + " (birding primero)";
          } else if (morningAny.length){
            const m = pick(morningAny, used);
            if (m && m.title) morningTitle = m.title;
          }

          let middayTitle = "Baja el ritmo, almuerzo y descanso (las mananas en el bosque nublado empiezan temprano)";
          if ((chocolateWanted || coffeeWanted) && middayAny.length){
            const mids = [];
            if (chocolateWanted && chocolateBlocks.length){
              const c = pick(chocolateBlocks, used);
              if (c && c.title) mids.push(c.title);
              else mids.push("tour de chocolate");
            }
            if (coffeeWanted && coffeeBlocks.length){
              const cf = pick(coffeeBlocks, used);
              if (cf && cf.title) mids.push(cf.title);
              else mids.push("tour de cafe");
            }
            if (mids.length) middayTitle = "Almuerzo + opcional " + mids.slice(0,2).join(" o ");
          }

          let afternoonTitle = "Una actividad ligera segun tu energia (opcional)";
          const afternoonParts = [];

          if (waterfallsWanted){
            if (waterfallBlocks.length){
              const w = pick(waterfallBlocks, used);
              afternoonParts.push((w && w.title) ? w.title : "Visita a cascada");
            } else {
              afternoonParts.push("Visita a cascada");
            }
          }

          if (adventureWanted){
            if (adventureBlocks.length){
              const a = pick(adventureBlocks, used);
              afternoonParts.push((a && a.title) ? a.title : "Tubing en rio");
            } else {
              afternoonParts.push("Tubing en rio");
            }
          }

          if (!afternoonParts.length){
            if (photoWanted){
              afternoonTitle = "Tiempo de fotografia (jardines, comederos, bordes de bosque) (opcional)";
            } else if (relaxedWanted){
              afternoonTitle = "Caminata facil o descanso en el lodge (opcional)";
            }
          } else {
            afternoonTitle = afternoonParts.slice(0,2).join(" | ") + " (opcional)";
          }

          let eveningTitle = "Explora el pueblo (cafes y restaurantes) o descansa temprano para manana";
          if (nightWanted){
            if (nightBlocks.length){
              const n = pick(nightBlocks, used);
              eveningTitle = (n && n.title) ? (n.title + " (opcional)") : "Caminata nocturna (opcional)";
            } else {
              eveningTitle = "Caminata nocturna (opcional)";
            }
          } else if (chocolateWanted || coffeeWanted){
            if (chocolateWanted){
              eveningTitle = "Tour de chocolate (opcional) o cena en el pueblo";
            } else if (coffeeWanted){
              eveningTitle = "Tour de cafe (opcional) o cena en el pueblo";
            }
          }

          const cardTitleParts = [];
          if (birdingWanted) cardTitleParts.push("Birding");
          if (adventureWanted) cardTitleParts.push("Aventura");
          if (!cardTitleParts.length) cardTitleParts.push("Birding primero");

          const cardTitle = "Plan del dia en Mindo: " + cardTitleParts.join(" + ");
          let cardDesc = "Birding temprano primero y el resto flexible segun tus intereses y energia.";
          if (days === 1){
            cardDesc = "Mantenlo enfocado: un bloque fuerte de birding, un extra opcional y una noche tranquila.";
          }

          const metaBits = [];
          if (birdingWanted) metaBits.push("Birding");
          if (adventureWanted) metaBits.push("Aventura");
          if (waterfallsWanted) metaBits.push("Cascadas");
          if (chocolateWanted) metaBits.push("Chocolate");
          if (coffeeWanted) metaBits.push("Cafe");
          if (photoWanted) metaBits.push("Fotografia");
          if (relaxedWanted) metaBits.push("Tranquilo");
          if (nightWanted) metaBits.push("Noche");

          const metaText = (metaBits.length ? (metaBits.join("  •  ") + "  •  ") : "") + "Horario flexible";

          const bullets = [
            "Manana: " + morningTitle,
            "Mediodia: " + middayTitle,
            "Tarde: " + afternoonTitle,
            "Noche: " + eveningTitle
          ];

          renderDayCard(d, "Mindo", cardTitle, cardDesc, metaText, bullets);

          plain.push("Dia " + d);
          plain.push("Manana: " + morningTitle);
          plain.push("Mediodia: " + middayTitle);
          plain.push("Tarde: " + afternoonTitle);
          plain.push("Noche: " + eveningTitle);
          plain.push("");
        }

        const globalNotes = [];
        globalNotes.push("Que podrias ver: colibries, tucanes, tangaras y muchas especies del bosque nublado.");
        globalNotes.push("Las mananas temprano son las mejores para actividad de aves y mejor luz. Si birding es tu prioridad, planifica 1 a 2 mananas fuertes.");
        if (hummingbirdsWanted){
          globalNotes.push("Colibries: jardines y comederos son ideales para verlos de cerca y tomar fotos. Manana y tarde suelen ser mejores.");
        }
        if (photoWanted){
          globalNotes.push("Fotografia: el clima del bosque nublado cambia rapido. Un protector de lluvia ayuda, y cambios rapidos de lente importan.");
        }
        if (adventureWanted){
          globalNotes.push("Aventura aparece solo porque la seleccionaste. Si quieres un dia mas ligero, cambia la tarde por caminata facil o tiempo en el pueblo.");
        }

        renderGlobalNotes(globalNotes);

        plain.push("Nota:");
        globalNotes.forEach(function(n){
          plain.push("- " + safeText(n));
        });

        plainEl.value = plain.join("\n");
        setStatus("Sugerencias generadas. Usa Copiar o Email.");
      }

      function copyItinerary(){
        const txt = (plainEl.value || "").trim();
        if (!txt){
          setStatus("Nada para copiar aun. Haz clic en Generar sugerencias primero.");
          return;
        }

        if (navigator.clipboard && window.isSecureContext){
          navigator.clipboard.writeText(txt).then(function(){
            setStatus("Copiado al portapapeles.");
          }).catch(function(){
            fallbackCopy();
          });
          return;
        }
        fallbackCopy();

        function fallbackCopy(){
          plainEl.focus();
          plainEl.select();
          try{
            const ok = document.execCommand("copy");
            setStatus(ok ? "Copiado al portapapeles." : "Fallo al copiar. Selecciona y copia manualmente.");
          }catch(err){
            setStatus("Fallo al copiar. Selecciona y copia manualmente.");
          }
          plainEl.setSelectionRange(0, 0);
        }
      }

      function isValidEmail(s){
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(s || "").trim());
      }

      async function sendEmail(){
        const endpoint = (root.getAttribute("data-endpoint") || "").trim();
        if (!endpoint){
          setStatus("Email no esta habilitado. Falta el endpoint del web app.");
          return;
        }

        const itineraryText = (plainEl.value || "").trim();
        if (!itineraryText){
          setStatus("Nada para enviar aun. Haz clic en Generar sugerencias primero.");
          return;
        }

        const primaryEmail = (primaryEmailEl.value || "").trim();
        if (!isValidEmail(primaryEmail)){
          setStatus("Por favor ingresa un email valido.");
          return;
        }

        const invitees = [t1EmailEl.value, t2EmailEl.value, t3EmailEl.value]
          .map(x => String(x || "").trim())
          .filter(x => x && isValidEmail(x))
          .map(x => ({ first_name:"", last_name:"", email:x }));

        const interests = getSelectedInterests();
        const payload = {
          first_name: "MBW",
          last_name: "Traveler",
          email: primaryEmail,
          trip_days: parseInt(daysEl.value || "3", 10),
          regions: "Mindo",
          experiences: interests.join(", "),
          page_url: location.href,
          user_agent: navigator.userAgent,
          itinerary_text: itineraryText,
          invitees_json: JSON.stringify(invitees)
        };

        setStatus("Enviando email...");

        try{
          const res = await fetch(endpoint, {
            method: "POST",
            headers: { "Content-Type": "text/plain;charset=utf-8" },
            body: JSON.stringify(payload)
          });

          const data = await res.json().catch(() => ({}));

          if (res.ok && data && data.ok){
            setStatus("Enviado. Revisa tu bandeja (y spam) en un minuto.");
            if (emailDetails && emailDetails.open) emailDetails.open = false;
          } else {
            setStatus("Fallo el envio. " + (data && (data.error || data.detail) ? (data.error || data.detail) : "Error desconocido"));
          }
        }catch(err){
          setStatus("Fallo el envio. Error de red o endpoint.");
        }
      }

      async function loadBlocks(){
        try{
          const res = await fetch(DATA_URL, { cache: "no-store" });
          const data = await res.json();
          const arr = data && data.blocks ? data.blocks : [];
          blocks = Array.isArray(arr) ? arr : [];
          setStatus("Listo. Elige dias, intereses y genera.");
        }catch(err){
          blocks = [];
          setStatus("Listo. Elige dias, intereses y genera.");
        }
      }

      btnGenerate.addEventListener("click", buildItinerary);
      btnCopy.addEventListener("click", copyItinerary);
      btnSendEmail.addEventListener("click", sendEmail);

      loadBlocks();
    })();
  </script>
  <script src="/assets/js/includes.js?v=1" defer></script>
  <script src="/assets/js/site.js?v=1" defer></script>
</body>
</html>
